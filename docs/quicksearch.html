<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"globals.js.html":{"id":"globals.js.html","title":"Source: globals.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: globals.js &quot;use strict&quot;; /** * Global framework functions and helpers. * * @module */ var _ = require(&quot;lodash&quot;); var logger = require(&quot;./logger&quot;); var TestCase = require(&quot;./testing&quot;).TestCase; /** * Verification matcher with expanded abilities. * * @global * @function */ global.expect = require(&quot;chai&quot;).expect; /** * Framework and tests config. * * @global * @namespace */ global.CONF = require(&quot;./config&quot;); /** * Atomic steps collection. * * @global * @namespace */ global.SS = new (require(&quot;./steps&quot;)); if (CONF.isWeb) { var wdio = require(&quot;webdriverio&quot;); var webdriver = wdio.remote(CONF.webdriver); SS.setWebdriver(webdriver); }; /** * Tests scope. * * @global * @function */ global.scope = describe; /** * Executed sessions counter. * * @type {Number} */ var sessNum = 0; /** * Tests session. * * @global * @function * @arg {string} [name] - Session name. By default it includes start date time. * @arg {object} [ctx] - Session context. By default it's empty. * @arg {function} func - Function with test cases. */ global.session = (name, ctx, func) =&gt; { if (!func &amp;&amp; !ctx) { func = name; ctx = {}; name = `Session ${new Date}`; } else if (!func) { func = ctx; ctx = name; name = `Session ${new Date}`; }; sessNum++; ctx.sessionNumber = sessNum; scope(name, () =&gt; { beforeSession(ctx); func(); afterSession(ctx); }); }; /** * Hook to execute before tests session. May be overridden. * * @global * @function * @arg {object} ctx - Session context. */ global.beforeSession = ctx =&gt; { if (CONF.isWeb) { before(async () =&gt; { if (!CONF.noDriversInstall) { CONF.noDriversInstall = true; await SS.installSeleniumDrivers(); }; await SS.startSeleniumServer(); await SS.launchBrowser(); }); }; }; /** * Hook to execute after tests session. May be overridden. * * @global * @function * @arg {object} ctx - Session context. */ global.afterSession = ctx =&gt; { if (CONF.isWeb) { after(async () =&gt; await SS.closeBrowser()); after(async () =&gt; await SS.stopSeleniumServer()); }; }; /** * Basis for any test case. * * If test with the same was registered already, this test will be omitted * with corresponding error in log. * * If retries amount is specified and this test was failed, the test will be * added to queue in separated session with title containing `Retry` and its * number. * * @global * @function * @arg {string} name - Name of test case. * @arg {function} func - Test function. */ global.baseTest = (names =&gt; { return (name, func) =&gt; { if (names.includes(name)) { logger.warn(`Test case &quot;${name}&quot; is added already. \\ Test case with the same name will be omitted.`); return; }; names.push(name); var testCase = new TestCase(name); var retries = CONF.testRetries; CONF.testCases.push(testCase); scope(name, () =&gt; { var testFunc = ctxs =&gt; { ctxs = ctxs || [{}]; before(() =&gt; { testCase.reset(); CONF.curTestCase = testCase; }); for (var ctx of ctxs) func(ctx); after(() =&gt; { if (!testCase.isFailed() || retries &lt;= 0) return; retries--; var retryNum = CONF.testRetries - retries; var ctx = { retryNumber: retryNum }; session(`Retry #${retryNum}`, ctx, () =&gt; { testFunc(testCase.failedParams); }); }); }; testFunc(); }); }; })([]); /** * Test case. * * @global * @function * @arg {string} name - Name of test case. * @arg {function} func - Test function. */ global.test = (name, func) =&gt; { baseTest(name, ctx =&gt; { func(ctx); }); }; /** * Test step. * * Contains actions and verifications, which will be executed separatly * from another steps. It is not the same as `SS`. `SS` is namespace with * atomic application actions. But this function is used to organize test * structure and to allocate independent test actions. * * @global * @function * @arg {string} name - Name of test case. * @arg {function} func - Step function. */ global.step = (name, func) =&gt; it(name, func); /** * Hook to be executed before each test step. * * @global * @function * @arg {string} name - Name of test case. * @arg {function} func - Hook function. */ global.beforeStep = beforeEach; /** * Hook to be executed after each test step. * * @global * @function * @arg {string} name - Name of test case. * @arg {function} func - Hook function. */ global.afterStep = afterEach; /** * Hook to iterate test steps through all languages specifed in configuration. * * It's applicable for multilingual application. If list of languages is * specified, it will be used firstly. Otherwise from configuration. * * @global * @function * @arg {object} ctx - Test case context. * @arg {function} func - Function with test steps. */ global.forEachLanguage = (ctx, func) =&gt; { var languages = ctx.language ? [ctx.language] : CONF.languages; languages.forEach(lang =&gt; { scope(`for language &quot;${lang}&quot;`, () =&gt; { before(() =&gt; CONF.curTestCase.testParams.language = lang); func(lang); }); }); }; × Search results Close "},"proxy_middleware_cache.js.html":{"id":"proxy_middleware_cache.js.html","title":"Source: proxy/middleware/cache.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/middleware/cache.js &quot;use strict&quot;; /** * */ var cacheManager = require(&quot;cache-manager&quot;); var fsStore = require(&quot;cache-manager-fs&quot;); var _ = require(&quot;lodash&quot;); var CONF = require(&quot;../../config&quot;); var logger = require(&quot;../../logger&quot;); if (CONF.useCache) { var diskCache = cacheManager.caching( { store: fsStore, options: { ttl: CONF.cacheTtl, maxsize: CONF.cacheSize, path:&quot;proxyCache&quot;, preventfill: !CONF.useExistingCache } }); } else { var diskCache = null; } /** * Middleware to cache server responses and reply them.\\ * * @function */ module.exports = function () { if (!this.useCache) return; if (!(await fromCache(this.req, this.res))) toCache(this.req, this.res); }; /** * Patches http response to send response from cache, if it is there. * * @function * @arg {object} req - http(s) request * @arg {object} res - http(s) response * @return {Promise.&lt;boolean&gt;} - `true` if response is in cache and * was patched, otherwise `false` */ fromCache = (req, res) =&gt; { if (_skipCache(req)) return false; return new Promise((resolve, reject) =&gt; { diskCache.get(_getReqKey(req), (err, result) =&gt; { if (err) reject(err); resolve(result); }); }).then(cached =&gt; { if (!cached) return false; fullLog(&quot;&lt;&lt;&lt; from cache&quot;, _getReqKey(req)); var response = JSON.parse(cached); res.writeHead(response.code, response.headers); res.end(Buffer.from(response.data)); return true; }); }; /** * Patches http response to put response to cache. * * @function * @arg {object} req - http(s) request * @arg {object} res - http(s) response */ toCache = (req, res) =&gt; { if (_skipCache(req)) return; var statusCode = 200, headers = {}; var resWrite = res.write; var resEnd = res.end; var resHead = res.writeHead; var resHeader = res.setHeader; var chunks = []; res.writeHead = function (statusCode_, statusMsg_, headers_) { statusCode = statusCode_; if (typeof(headers_) === &quot;object&quot;) _.assign(headers, headers_); else if (typeof(statusMsg_) === &quot;object&quot;) _.assign(headers, statusMsg_); resHead.apply(this, arguments); }; res.setHeader = function(name, value) { headers[name] = value; resHeader.apply(this, arguments); }; res.write = function (chunk) { if (chunk instanceof Buffer) chunks.push(chunk); resWrite.apply(this, arguments); }; res.end = function (chunk) { if (chunk instanceof Buffer) chunks.push(chunk); var resData = JSON.stringify({ data: Buffer.concat(chunks).toJSON(), code: statusCode, headers: headers }); fullLog(&quot;&gt;&gt;&gt; to cache&quot;, _getReqKey(req)); diskCache.set(_getReqKey(req), resData); resEnd.apply(this, arguments); }; }; var _getReqKey = req =&gt; req.method + &quot;_&quot; + req.headers.host + req.url; var _skipCache = req =&gt; { for (var skippedUrl of skippedUrls) if (req.url.startsWith(skippedUrl)) return true; }; × Search results Close "},"cli.js.html":{"id":"cli.js.html","title":"Source: cli.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: cli.js &quot;use strict&quot;; /** * Contains functions to execute tests via command line interface. * * @module */ var path = require(&quot;path&quot;); var Mocha = require(&quot;mocha&quot;); var CONF = require(&quot;./config&quot;); /** * Runs tests. * * - executes `runner.js` file, which is entry point to load and execute * files with tests * - connects custom reporter to `mochajs`. * * @function */ module.exports.run = () =&gt; { var mocha = new Mocha({ timeout: CONF.timeouts.testCase, reporter: path.resolve(__dirname, &quot;reporter&quot;) }); mocha.addFile(path.resolve(__dirname, &quot;runner.js&quot;)); mocha.run(failures =&gt; { process.on(&quot;exit&quot;, () =&gt; { process.exit(failures); }); }); }; × Search results Close "},"config.js.html":{"id":"config.js.html","title":"Source: config.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: config.js &quot;use strict&quot;; /** * Configuration of framework and executed test cases. It also may be used * as a bus to read/write data and share it among components and objects. * * @module */ var fs = require(&quot;fs&quot;); var path = require(&quot;path&quot;); var _ = require(&quot;lodash&quot;); var argv = require(&quot;yargs&quot;).argv; var expect = require(&quot;chai&quot;).expect; var mkdirp = require(&quot;mkdirp&quot;); var rimraf = require(&quot;rimraf&quot;); var ConfigError = require(&quot;./error&quot;).ConfigError; var cwd = process.cwd(); /* Load CLI arguments from config */ var argConfig = {}; var argConfigPath = path.resolve(cwd, &quot;args.json&quot;); if (fs.existsSync(argConfigPath)) { argConfig = require(argConfigPath); for (var key in argConfig) { argConfig[_.camelCase(key)] = argConfig[key]; delete argConfig[key]; }; }; _.assign(argConfig, argv); /* Set up tests folder */ if (argConfig.target) { var testsDir = path.resolve(cwd, argConfig.target); } else if (argConfig._ &amp;&amp; argConfig._[0]) { var testsDir = path.resolve(cwd, argConfig._[0]); } else { var testsDir = path.resolve(cwd, &quot;tests&quot;); }; if (!fs.existsSync(testsDir)) { throw new ConfigError(`File or folder with tests &quot;${testsDir}&quot; is absent`); }; /* Set up reports folder */ var reportsDir = path.resolve(cwd, (argConfig.report || &quot;reports&quot;)); if (fs.existsSync(reportsDir)) { rimraf.sync(reportsDir); }; mkdirp.sync(reportsDir); /* Set up default config */ var config = module.exports = { curTestCase: null, testCases: [], testsDir: testsDir, reportsDir: reportsDir, log: { file: path.resolve(cwd, &quot;glacejs.log&quot;), level: &quot;debug&quot;, }, webdriver: {} // will be configured below }; /* Use CLI arguments */ config.isWeb = !!argConfig.web; // default `false` config.appUrl = argConfig.url; config.noDriversInstall = !argConfig.installDrivers; // default `true` config.platform = argConfig.platform || &quot;pc&quot;; expect([&quot;pc&quot;, &quot;android&quot;, &quot;ios&quot;], &quot;Invalid `--platform` value&quot;).include(config.platform); config.browserName = argConfig.browser; // default is platform specific config.testRetries = argConfig.retry || 0; expect(config.testRetries).gte(0); config.stdoutLog = !!argConfig.stdoutLog; // default `false` config.toTestrail = !!argConfig.testrail; // default `false` if (argConfig.seleniumAddr) { config.seleniumHost = argConfig.seleniumAddr.split(':')[0]; config.seleniumPort = argConfig.seleniumAddr.split(':')[1]; }; /* Configure webdriver */ var desired = config.webdriver.desiredCapabilities = {}; if (config.seleniumHost) { config.webdriver.host = config.seleniumHost; }; if (config.seleniumPort) { config.webdriver.port = config.seleniumPort; }; if (config.platform === &quot;pc&quot;) { config.isDesktop = true; desired.browserName = config.browserName || &quot;chrome&quot;; if (desired.browserName === &quot;chrome&quot;) { desired.chromeOptions = { args: [ &quot;test-type&quot;, &quot;start-maximized&quot;, &quot;disable-infobars&quot;, &quot;enable-precise-memory-info&quot; ], prefs: { &quot;credentials_enable_service&quot;: false, &quot;profile&quot;: { &quot;password_manager_enabled&quot;: false, }, }, }; }; } else { config.isMobile = true; desired.deviceName = argConfig.device; desired.platformVersion = String(argConfig.osVersion); if (argConfig.udid) { desired.udid = argConfig.udid; }; if (config.platform === &quot;android&quot;) { config.isAndroid = true; desired.browserName = argConfig.browser || &quot;chrome&quot;; desired.platformName = &quot;Android&quot;; }; if (config.platform === &quot;ios&quot;) { config.isIos = true; desired.browserName = argConfig.browser || &quot;safari&quot;; desired.platformName = &quot;iOS&quot;; desired.automationName = argConfig.iosEngine || &quot;XCUITest&quot;; }; }; /* Merge user config */ var userConfig = {}; var userConfigPath = path.resolve(cwd, &quot;config.js&quot;); if (fs.existsSync(userConfigPath)) { userConfig = require(userConfigPath); }; _.assign(config, userConfig); × Search results Close "},"error.js.html":{"id":"error.js.html","title":"Source: error.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: error.js &quot;use strict&quot;; /** * Framework errors. * * @module */ var util = require(&quot;util&quot;); var BaseError = require(&quot;es6-error&quot;); /** * Base framework error. * * @class * @arg {string} message - Error message. */ var GlaceError = module.exports.GlaceError = function (message) { BaseError.call(this, message); }; util.inherits(GlaceError, BaseError); /** * Config error. * * @class * @arg {string} message - Error message. */ var ConfigError = module.exports.ConfigError = function (message) { GlaceError.call(this, message); }; util.inherits(ConfigError, GlaceError); /** * Step error. * * @class * @arg {string} message - Error message. */ var StepError = module.exports.StepError = function (message) { GlaceError.call(this, message); }; util.inherits(StepError, GlaceError); × Search results Close "},"image.js.html":{"id":"image.js.html","title":"Source: image.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: image.js &quot;use strict&quot;; /** * Describes image processing. * * @module */ var sharp = require(&quot;sharp&quot;); var temp = require(&quot;temp&quot;); var U = require(&quot;./utils&quot;); /** * Creates new instance of Image. * * @class * @arg {string} srcPath - path to processed image * @arg {object} [srcOpts] - image options * @arg {number} [srcOpts.scaleX] - image current scale value on `X` axis * @arg {number} [srcOpts.scaleY] - image current scale value on `Y` axis */ var Image = module.exports = function (srcPath, srcOpts) { if (!(this instanceof Image)) return new Image(srcPath, srcOpts); srcOpts = U.defVal(srcOpts, {}); srcOpts.scaleX = U.defVal(srcOpts.scaleX, 1); srcOpts.scaleY = U.defVal(srcOpts.scaleY, 1); this._srcPath = srcPath; this._srcOpts = srcOpts; }; /** * Defines if processed image includes specified image. * * @method * @arg {string} dstPath - path to potentially included image * @arg {object} [dstOpts] - included image options * @arg {number} [dstOpts.tolerance=0.05] - comparison tolerance * @arg {?string} [dstOpts.matchedPath=null] - path to same captured place * @arg {boolean} [dstOpts.saveMatch=false] - flag to capture images * intersection or no * @return {Promise.&lt;object&gt;} - result */ Image.prototype.includes = function (dstPath, dstOpts) { dstOpts = U.defVal(dstOpts, {}); dstOpts.scaleX = U.defVal(dstOpts.scaleX, 1); dstOpts.scaleY = U.defVal(dstOpts.scaleY, 1); this._dstPath = dstPath; this._dstOpts = dstOpts; this._tolerance = U.defVal(dstOpts.tolerance, .05); this._matchedPath = U.defVal(dstOpts.matchedPath); this._saveMatch = U.defVal(dstOpts.saveMatch, !!this._matchedPath); if (this._saveMatch &amp;&amp; !this._matchedPath) this._matchedPath = temp.path({ suffix: '.png' }); this._pixelDenominator = 255 * Math.sqrt(3); var srcImage; return this._loadImg(this._srcPath, this._srcOpts).then(image =&gt; { srcImage = image; return this._loadImg(this._dstPath, this._dstOpts); }).then(dstImage =&gt; { return this._includes(srcImage, dstImage); }).then(result =&gt; { if (!result.isIncluded) return { isIncluded: false }; if (!this._saveMatch) return result; return this ._saveMatchImage(result.offsetX, result.offsetY, result.width, result.height) .then(() =&gt; { result.matchedPath = this._matchedPath; return result; }); }); }; /** * Loads image. * * @method * @protected * @arg {string} imgPath - path loaded image * @arg {object} imgOpts - image options * @return {Promise.&lt;object&gt;} - image data */ Image.prototype._loadImg = function(imgPath, imgOpts) { var width, height; var img = sharp(imgPath); return img.metadata().then(metadata =&gt; { width = Math.ceil(metadata.width / imgOpts.scaleX); height = Math.ceil(metadata.height / imgOpts.scaleY); return img.resize(width, height).raw().toBuffer(); }).then(data =&gt; { return { data: data, width: width, height: height }; }); }; /** * Saves matched part of image. * * @method * @protected * @arg {number} left - offset from left image border * @arg {number} top - offset from top image border * @arg {number} width - width of matched part * @arg {number} height - height of matched part * @return {Promise} */ Image.prototype._saveMatchImage = function (left, top, width, height) { return sharp(this._srcPath) .extract({ left: left, top: top, width: width, height: height }) .toFile(this._matchedPath); }; /** * Defines whether one image data includes another. * * @method * @protected * @arg {object} src - source image data * @arg {object} dst - destination image data, which is potentially included * @return {object} - result */ Image.prototype._includes = function (src, dst) { var srcPixels = this._cropPixels(this._getPixels(src)), dstPixels = this._cropPixels(this._getPixels(dst)); var offsetX, offsetY, diffValue, x, y, pixels; var dstUsedPixels = [], dstWidth = dstPixels[0].length, dstHeight = dstPixels.length; var result = { isIncluded: false, diffValue: null, offsetX: null, offsetY: null, width: dstWidth, height: dstHeight }; var deltaX = srcPixels[0].length - dstWidth, deltaY = srcPixels.length - dstHeight; for (y = 0; y &lt; dstHeight; y++) { pixels = dstPixels[y]; for (x = 0; x &lt; dstWidth; x++) { if (this._isPixelUsed(pixels[x])) dstUsedPixels.push({ pixel: pixels[x], x: x, y: y }); }; }; for (offsetY = 0; offsetY &lt;= deltaY; offsetY++) { for (offsetX = 0; offsetX &lt;= deltaX; offsetX++) { diffValue = this._getDiffValue(srcPixels, dstUsedPixels, offsetX, offsetY); if (diffValue === null) continue; if (result.diffValue === null || result.diffValue &gt; diffValue) { result.isIncluded = true; result.diffValue = diffValue; result.offsetX = offsetX; result.offsetY = offsetY; }; if (diffValue === 0 || !this._saveMatch) return result; }; }; return result; }; /** * Calculates difference between source pixels and destination pixels. * * @method * @protected * @arg {object[][]} - source pixels matrix * @arg {object[][]} - destination pixels matrix * @arg {number} offsetX - source left border offset * @arg {number} offsetY - source top border offset * @return {number} - difference value */ Image.prototype._getDiffValue = function (srcPixels, dstPixels, offsetX, offsetY) { var diffPixels = 0, limit = this._tolerance * dstPixels.length, dstPixel, srcPixel, i; for (i = 0; i &lt; dstPixels.length; i++) { dstPixel = dstPixels[i]; srcPixel = srcPixels[offsetY + dstPixel.y][offsetX + dstPixel.x]; if (this._isPixelTolerant(srcPixel, dstPixel.pixel)) continue; diffPixels++; if (diffPixels &gt; limit) return null; }; return diffPixels / dstPixels.length; }; /** * Defines whether pixel should be used for difference calculation or no, * according its alpha value. * * @method * @protected * @arg {object} pixel - pixel * @return {boolean} - `true` if should be, `false` otherwise */ Image.prototype._isPixelUsed = function (pixel) { return (255 - pixel.A) / 255 &lt; this._tolerance; }; /** * Defines whether source pixel is tolerant to destination pixel. * * @method * @protected * @arg {object} srcPixel - source pixel * @arg {object} dstPixel - destination pixel * @return {boolean} - `true` if pixels are tolerant, `false` otherwise */ Image.prototype._isPixelTolerant = function(srcPixel, dstPixel) { var deltaR = srcPixel.R - dstPixel.R, deltaG = srcPixel.G - dstPixel.G, deltaB = srcPixel.B - dstPixel.B; return Math.sqrt(deltaR * deltaR + deltaG * deltaG + deltaB * deltaB) / this._pixelDenominator &lt; this._tolerance; }; /** * Retrieves pixels from image data. * * @method * @protected * @arg {object} img - image data * @return {object[][]} - pixels matrix */ Image.prototype._getPixels = function (img) { var pixels = [], height = img.height, width = img.width * 4, x, y, offset; for (y = 0; y &lt; height; y++) { offset = width * y; pixels.push([]); for (var x = 0; x &lt; width; x += 4) { pixels[y].push({ R: img.data[offset + x], G: img.data[offset + x + 1], B: img.data[offset + x + 2], A: img.data[offset + x + 3] }); }; }; return pixels; }; /** * Crops pixels, removes empty rows and columns. * * @method * @protected * @arg {object[][]} pixels - pixels matrix * @return {object[][]} - cropped pixels matrix */ Image.prototype._cropPixels = function (pixels) { pixels = this._cropTop(pixels); pixels.reverse(); pixels = this._cropTop(pixels); pixels.reverse(); pixels = this._transpose(pixels); pixels = this._cropTop(pixels); pixels.reverse(); pixels = this._cropTop(pixels); pixels.reverse(); return this._transpose(pixels); }; /** * Crops top part of pixels matrix. * * @method * @protected * @arg {object[][]} pixels - pixels matrix * @return {object[][]} - cropped pixels matrix */ Image.prototype._cropTop = function (pixels) { var croppedPixels = [], isTransparent = true, width = pixels[0].length, height = pixels.length, x, y, pixelsRow; for (y = 0; y &lt; height; y++) { pixelsRow = pixels[y]; if (isTransparent) { for (x = 0; x &lt; width; x++) { if (pixelsRow[x].A != 0) { isTransparent = false; break; }; }; }; if (!isTransparent) croppedPixels.push(pixelsRow); }; return croppedPixels; }; /** * Transposes pixels matrix. * * @method * @arg {object[][]} pixels - pixels matrix * @return {object[][]} transposed pixels matrix */ Image.prototype._transpose = function (pixels) { var width = pixels[0].length, height = pixels.length, tPixels = [], x, y; if (width === 0 || height === 0) return []; for (y = 0; y &lt; width; y++) { tPixels[y] = []; for (x = 0; x &lt; height; x++) { tPixels[y][x] = pixels[x][y]; }; }; return tPixels; }; × Search results Close "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: index.js &quot;use strict&quot;; /** * Main GlaceJS module. * * @module */ × Search results Close "},"logger.js.html":{"id":"logger.js.html","title":"Source: logger.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: logger.js &quot;use strict&quot;; /** * Configures framework logging. * * @module */ var fs = require(&quot;fs&quot;); var path = require(&quot;path&quot;); var _ = require(&quot;lodash&quot;); var mkdirp = require(&quot;mkdirp&quot;); var winston = require(&quot;winston&quot;); var CONF = require(&quot;./config&quot;); if (fs.existsSync(CONF.log.file)) fs.unlinkSync(CONF.log.file); winston.level = CONF.log.level; winston.add(winston.transports.File, { filename: CONF.log.file, json: false }); if (!CONF.stdoutLog) winston.remove(winston.transports.Console); var stepsLogger = new winston.Logger; var debugLogger = new winston.Logger; /** * Logs step info to `steps.log` file inside folder with test case name. * * @function */ winston.step = function () { if (CONF.stdoutLog) console.log.apply(console, arguments); stepsLogger.info.apply(stepsLogger, arguments); }; /** * Logs step debug to `debug.log` file inside folder with test case name. * * @function */ winston.stepDebug = function () { if (CONF.stdoutLog) console.log.apply(console, arguments); debugLogger.info.apply(debugLogger, arguments); }; /** * Sets target logs folder according by test case name. * * @function * @arg {string} testName - Name of testcase. */ winston.setTestCase = () =&gt; { var logsDir = path.resolve(CONF.reportsDir, CONF.curTestCase.name, &quot;logs&quot;); mkdirp.sync(logsDir); var stepsLog = path.resolve(logsDir, &quot;steps.log&quot;); var debugLog = path.resolve(logsDir, &quot;debug.log&quot;); if (stepsLogger.transports.file) { stepsLogger.remove(winston.transports.File); }; stepsLogger.add(winston.transports.File, { filename: stepsLog, json: false }); if (debugLogger.transports.file) { debugLogger.remove(winston.transports.File); }; debugLogger.add(winston.transports.File, { filename: debugLog, json: false }); }; module.exports = winston; × Search results Close "},"page_element.js.html":{"id":"page_element.js.html","title":"Source: page/element.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: page/element.js &quot;use strict&quot;; /** * Defines classes responsible for interaction with DOM in browser context. * * @module */ var weak = require(&quot;weak&quot;); var U = require(&quot;./utils&quot;); var PointerEvents = require(&quot;./event&quot;).PointerEvents; /** * Creates a new instance of `Control`. * * `Control` binds DOM control in browser context with virtual control in test. * * @class * @arg {string} name - control name * @arg {object} driver - selenium driver instance */ var Control = function (name, selector, page) { this.name = name; this.selector = selector; this.event = new PointerEvents(selector, page); this._page = weak(page); this._elCmd = `document.querySelector('${this._selector}')`; }; /** * Gets text content of DOM element. * * @method * @return {Promise.&lt;string&gt;} - text value or null */ Control.prototype.getText = function () { return this._driver.getText(this._selector).then(value =&gt; { if (value) return value.trim(); return this._driver.getAttribute(this._selector, &quot;value&quot;); }).then(value =&gt; { if (value) return value.trim(); return this._driver.getAttribute(this._selector, &quot;innerHTML&quot;); }).then(value =&gt; { if (value) return value.trim(); return null; }); }; /** * Gets DOM control location with attributes: * `x`, `y`, `midX`, `midY`, `width`, `height` * * @method * @return {Promise.&lt;object&gt;} - location of control */ Control.prototype.location = function (opts) { var cmd = ` \\ var ctrl = &quot; + this._elCmd + &quot;; \\ var rect = ctrl.getBoundingClientRect(); \\ var location = {}; \\ location.x = Math.ceil(rect.left); \\ location.y = Math.ceil(rect.top); \\ location.width = Math.ceil(rect.width); \\ location.height = Math.ceil(rect.height); \\ location.midX = Math.ceil(location.x + location.width / 2); \\ location.midY = Math.ceil(location.y + location.height / 2); \\ return location;`; return this._driver.execute(cmd).then(result =&gt; result.value); }; /** * Scrolls control into browser viewport. * * @method * @return {Promise.&lt;*&gt;} - result of javascript execution in browser context */ Control.prototype.scrollIntoView = function () { var cmd = &quot;return &quot; + this._elCmd + &quot;.scrollIntoView();&quot;; return this._driver.execute(cmd).then(result =&gt; { return result.value; }); }; /** * Clicks control in browser. * * @method * @return {Promise.&lt;*&gt;} - result of selenium execution in browser context */ Control.prototype.click = function () { return this.scrollIntoView().then(() =&gt; { return this._driver.click(this._selector); }); }; /** * Taps control in browser. * * @method */ Control.prototype.tap = Control.prototype.click; /** * Defines whether control is selected or no. * * @method * @return {Promise.&lt;boolean&gt;} - `true` if control is selected, `false` otherwise */ Control.prototype.isSelected = function () { return this._driver.isSelected(this._selector).then(result =&gt; { if (result) return true; return this._driver.getAttribute(this._selector, &quot;class&quot;).then(result =&gt; { return result.includes(&quot;selected&quot;); }); }); }; /** * Defines whether control is exist or no. * * @method * @return {Promise.&lt;boolean&gt;} - `true` if control is exist, `false` otherwise */ Control.prototype.isExist = function () { var cmd = &quot;return !!&quot; + this._elCmd + &quot;;&quot;; return this._driver.execute(cmd).then(result =&gt; { return result.value; }); }; /** * Waits for control is exist. * * @method * @arg {number} [timeout] - timeout to wait, ms * @return {Promise.&lt;*&gt;} - result of selenium execution * @throws {TimeoutError} - If control isn't exist after timeout. */ Control.prototype.waitForExist = function (timeout) { var timeout = U.defVal(timeout, CONF.timeout.animation); var errMsg = this._name + &quot; isn't exist after &quot; + timeout + &quot; ms&quot;; return this._driver.waitUntil(async () =&gt; { return await this.isExist(); }, timeout, errMsg); }; /** * Waits for control isn't exist. * * @method * @arg {number} [timeout] - timeout to wait, ms * @return {Promise.&lt;*&gt;} - result of selenium execution * @throws {TimeoutError} - If control is still exist after timeout. */ Control.prototype.waitForNonExist = function (timeout) { var timeout = U.defVal(timeout, CONF.timeout.animation); var errMsg = this._name + &quot; is still exist after &quot; + timeout + &quot; ms&quot;; return this._driver.waitUntil(async () =&gt; { return !(await this.isExist()); }, timeout, errMsg); }; /** * Defines whether control is visible or no. * * @method * @return {Promise.&lt;boolean&gt;} - `true` if control is visible, `false` otherwise */ Control.prototype.isVisible = function () { return this.isExist().then(result =&gt; { if (!result) return false; return this._driver.isVisible(this._selector); }); }; /** * Waits for control is visible. * * @method * @arg {number} [timeout] - timeout to wait, ms * @return {Promise.&lt;*&gt;} - result of selenium execution * @throws {TimeoutError} - If control isn't visible after timeout. */ Control.prototype.waitForVisible = function (timeout) { var timeout = U.defVal(timeout, CONF.timeout.animation); var errMsg = this._name + &quot; isn't visible after &quot; + timeout + &quot; ms&quot;; return this._driver.waitUntil(async () =&gt; { return await this.isVisible(); }, timeout, errMsg); }; /** * Waits for control is invisible. * * @method * @arg {number} [timeout] - timeout to wait, ms * @return {Promise.&lt;*&gt;} - result of selenium execution * @throws {TimeoutError} - If control is still visible after timeout. */ Control.prototype.waitForInvisible = function (timeout) { var timeout = U.defVal(timeout, CONF.timeout.animation); var errMsg = this._name + &quot; is still visible after &quot; + timeout + &quot; ms&quot;; return this._driver.waitUntil(async () =&gt; { return !(await this.isVisible()); }, timeout, errMsg); }; × Search results Close "},"page_event.js.html":{"id":"page_event.js.html","title":"Source: page/event.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: page/event.js &quot;use strict&quot;; /** * Browser events. * * @module */ var weak = require(&quot;weak&quot;); /** * Creates a new pointer events instance. * * @class * @classdesc Contains browser pointer events. */ var PointerEvents = module.exports.PointerEvents = function (selector, page) { this.selector = selector; this._page = weak(page); this._elCmd = `document.querySelector('${this._selector}')`; }; /** * Moves pointer over element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.over = function (x, y) { var cmd = `var el = ${this._elCmd}; \\ var ev = new PointerEvent('pointerover', \\ { clientX: ${x}, clientY: ${y}, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);`; return this._driver.execute(cmd); } /** * Enters pointer to element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.enter = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointerenter', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Presses pointer down on element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.down = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointerdown', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Unpresses pointer up on element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.up = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointerup', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Moves pointer to element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.move = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointermove', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Cancel pointer on element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.cancel = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointercancel', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Moves out pointer from element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.out = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointerout', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } /** * Leaves pointer from element by selector. * * @param {string} selector - css selector * @param {integer} x - `x` coordinate * @param {integer} y - `y` coordinate * @return {object} - webdriverio instance */ PointerEvents.prototype.leave = function (selector, x, y) { var cmd = &quot;var el = document.querySelector('&quot; + selector + &quot;'); \\ var ev = new PointerEvent('pointerleave', \\ { clientX: &quot; + x + &quot;, clientY: &quot; + y + &quot;, \\ bubbles: true, cancelable: true, view: window }); \\ el.dispatchEvent(ev);&quot; return this._driver.execute(cmd); } × Search results Close "},"page_index.js.html":{"id":"page_index.js.html","title":"Source: page/index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: page/index.js &quot;use strict&quot;; /** * Page. * * @module */ var GlaceError = require(&quot;../error&quot;).GlaceError; var Element = require(&quot;./element&quot;); var Page = module.exports.Page = function (name, pageUrl, elements) { this.name = name; this.url = pageUrl; this._webdriver = null; this.addElements(elements); }; Page.prototype.setDriver = function (webdriver) { this._webdriver = webdriver; }; Page.prototype._getDriver = function () { expect(this._webdriver, &quot;Webdriver isn't set&quot;) .to.not.be.null; }; Page.prototype.addElements = function (elements) { for (var name in elements) { var selector = elements[name]; if (this[name]) { throw new GlaceError( `Page '${this.name}' already contains property '${name}'`); }; this[name] = new Element(name, selector, page); }; }; Page.prototype.removeElements = function () { for (var name of arguments) delete this[name]; }; Page.prototype.open = function (hostUrl) { var fullUrl = url.resolve(hostUrl, this.url); return this._getDriver().url(fullUrl); }; × Search results Close "},"proxy_base.js.html":{"id":"proxy_base.js.html","title":"Source: proxy/base.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/base.js &quot;use strict&quot;; /** * Base proxy. * * @module */ var GlaceError = require(&quot;../error&quot;).GlaceError; var U = require(&quot;../utils&quot;); /** * Base proxy. * * @class * @abstract */ var BaseProxy = module.exports = function (opts) { this.isRunning = false; this.speed = null; this.responsesData = null; this.useCache = U.defVal(opts.useCache, false); this._timeout = U.defVal(opts.timeout, 60000); this._port = U.defVal(opts.port, 0); this._proxy = null; }; /** * Sets speed of responses from proxy to client. * * @method * @arg {number} speed - Proxy responses speed. kb/s. */ BaseProxy.prototype.setSpeed = function (speed) { this.speed = speed; }; /** * Resets speed of responses. * * @method */ BaseProxy.prototype.resetSpeed = function () { this.speed = null; }; /** * Starts to measure responses and gather information of them. * * @method */ BaseProxy.prototype.measureResponses = function () { this.responsesData = []; }; /** * Disables responses measurement. * * @method */ BaseProxy.prototype.unmeasureResponses = function () { this.responsesData = null; }; /** * Gets responses data. * * @method */ BaseProxy.prototype.getResponsesData = function () { if (this.responsesData === null) return null; return _.cloneDeep(this.responsesData); }; /** * Starts proxy. * * @method */ BaseProxy.prototype.start = function () { throw new Error(&quot;Should be implemented in derived class&quot;); }; /** * Stops proxy server. * * @method */ BaseProxy.prototype.stop = function () { throw new Error(&quot;Should be implemented in derived class&quot;); }; × Search results Close "},"proxy_globalProxy.js.html":{"id":"proxy_globalProxy.js.html","title":"Source: proxy/globalProxy.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/globalProxy.js &quot;use strict&quot;; /** * Describes global transparent proxy. * * @module */ var fs = require(&quot;fs&quot;); var path = require(&quot;path&quot;); var util = require(&quot;util&quot;); var expect = require(&quot;chai&quot;).expect; var MitmProxy = require(&quot;http-mitm-proxy&quot;); var spawn = require(&quot;cross-spawn&quot;); var GlaceError = require(&quot;../error&quot;).GlaceError; var U = require(&quot;../utils&quot;); var BaseProxy = require(&quot;./base&quot;); var middleware = require(&quot;./middleware&quot;); /** * Creates new instance of `GlobalProxy`. * * @class * @classdesc - Contains methods to run and manage global transparent proxy. * @arg {object} [opts] - global proxy options * @arg {number} [opts.port=8080] - global proxy port * @arg {number} [opts.timeout=0] - global proxy timeout * @arg {boolean} [opts.installCertificate=false] - flag to install global * proxy certificate as trusted in order to manage `https` connection or no * @arg {?string} [opts.rootPath] - Folder where proxy starts in order to * generate self-signed certificate. By default is `current work directory`. * @arg {boolean} [opts.useCache=false] - flag to cache and take from cache responses */ var GlobalProxy = module.exports = function (opts) { opts = U.defVal(opts, {}); BaseProxy.call(this, opts); this._installCertificate = U.defVal(opts.installCertificate, false); this._certificatePath = path.resolve(process.cwd(), &quot;.http-mitm-proxy&quot;, &quot;certs&quot;, &quot;ca.pem&quot;); this._proxy = MitmProxy(); this._proxy.onRequest(async (ctx, callback) =&gt; { this.req = ctx.clientToProxyRequest; this.res = ctx.proxyToClientResponse; for (var mw of middleware) if (await mw.call(this)) return; delete this.req; delete this.res; return callback(); }); this._proxy.onResponse((ctx, callback) =&gt; { ctx.proxyToClientResponse.setHeader( &quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); return callback(null); }); }; util.inherits(GlobalProxy, BaseProxy); /** * Starts global proxy if it&quot;s not started yet. * * @method */ GlobalProxy.prototype.start = function () { if (this.isRunning) return; return new Promise((resolve, reject) =&gt; { this._proxy.listen({ port: this._port, silent: true, timeout: this._timeout }, err =&gt; { if (err) reject(err); resolve(); }); }).then(() =&gt; { this.isRunning = true; if (this._installCertificate) { if (process.platform !== &quot;win32&quot;) { throw new GlaceError(&quot;For your platform certificate&quot; + &quot;installation isn't implemented&quot;); }; expect(fs.existsSync(this._certificatePath), `Proxy certificate ${this._certificatePath} is absent`) .to.be.true; var proc = spawn.sync(&quot;certutil&quot;, [ &quot;-addstore&quot;, &quot;-enterprise&quot;, &quot;-f&quot;, &quot;Root&quot;, this._certificatePath ]); if (proc.status !== 0) { throw new GlaceError( &quot;Can't install proxy certificate as trusted:\\n&quot; + proc.stdout.toString()); }; }; }); }; /** * Stops global proxy if it&quot;s not stopped yet. * * @method */ GlobalProxy.prototype.stop = function () { if (!this.isRunning) return; this._proxy.close(); this.isRunning = false; }; × Search results Close "},"proxy_index.js.html":{"id":"proxy_index.js.html","title":"Source: proxy/index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/index.js &quot;use strict&quot;; /** * Proxy package. * * @module */ module.exports = { GlobalProxy: require(&quot;./globalProxy&quot;), WebProxy: require(&quot;./proxy&quot;), }; × Search results Close "},"proxy_middleware_index.js.html":{"id":"proxy_middleware_index.js.html","title":"Source: proxy/middleware/index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/middleware/index.js &quot;use strict&quot;; /** * Proxy middleware package. * * @module */ module.exports = [ require(&quot;./speed&quot;), require(&quot;./info&quot;), require(&quot;./cache&quot;), ]; × Search results Close "},"proxy_middleware_info.js.html":{"id":"proxy_middleware_info.js.html","title":"Source: proxy/middleware/info.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/middleware/info.js &quot;use strict&quot;; /** * Contains proxy middlewares * * @module */ var cacheManager = require(&quot;cache-manager&quot;); var fsStore = require(&quot;cache-manager-fs&quot;); var _ = require(&quot;lodash&quot;); var CONF = require(&quot;../../config&quot;); var fullLog = require('../../logging').fullLog; if (CONF.useCache) { var diskCache = cacheManager.caching( { store: fsStore, options: { ttl: CONF.cacheTtl, maxsize: CONF.cacheSize, path:&quot;proxyCache&quot;, preventfill: !CONF.useExistingCache } }); } else { var diskCache = null; } /** * Middleware to gather information about requests and responses. * * @function */ module.exports = function () { if (!this.responsesData) return; var data = { name: req.headers.host + req.url, encoding: req.headers[&quot;content-encoding&quot;] || &quot;identity&quot;, size: 0, chunkSizes: [] }; this.responsesData.push(data); var resWrite = this.res.write; var resEnd = this.res.end; var addData = chunk =&gt; { if (!chunk) return; data.chunkSizes.push(chunk.length); data.size += chunk.length; }; this.res.write = function (chunk) { addData(chunk); resWrite.apply(this, arguments); }; this.res.end = function (chunk) { addData(chunk); resEnd.apply(this, arguments); }; }; × Search results Close "},"proxy_middleware_speed.js.html":{"id":"proxy_middleware_speed.js.html","title":"Source: proxy/middleware/speed.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/middleware/speed.js &quot;use strict&quot;; /** * Middleware to manage responses speed. * * @module */ /** * Middleware to change responses speed. * * @function * @arg {object} res - http(s) response * @arg {number} speed - limited speed value, kb/s */ module.exports.changeResponsesSpeed = function () { if (!this.speed) return; var timer = 1; var size = Math.ceil(this.speed / 8); var prms = Promise.resolve(); var resWrite = this.res.write; var resEnd = this.res.end; var promisify = args =&gt; { var chunk = args[0]; if (!chunk) return; for (var i = 0; i &lt; chunk.length; i += size) { prms = prms.then((idx =&gt; () =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { args[0] = chunk.slice(idx, idx + size); resWrite.apply(res, args); resolve(); }, timer); }); })(i)); }; }; this.res.write = function () { promisify(Array.from(arguments)); }; this.res.end = function () { var args = Array.from(arguments); promisify(args); prms.then(() =&gt; { args[0] = null; resEnd.apply(res, args); }); }; }; × Search results Close "},"proxy_proxy.js.html":{"id":"proxy_proxy.js.html","title":"Source: proxy/proxy.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: proxy/proxy.js &quot;use strict&quot;; /** * Web Proxy classes and functions. * * @module */ var os = require(&quot;os&quot;); var http = require(&quot;http&quot;); var https = require(&quot;https&quot;); var url = require(&quot;url&quot;); var util = require(&quot;util&quot;); var _ = require(&quot;lodash&quot;); var expect = require(&quot;chai&quot;).expect; var express = require(&quot;express&quot;); var httpProxy = require(&quot;http-proxy&quot;); var CONF = require(&quot;../config&quot;); var U = require(&quot;../utils&quot;); var BaseProxy = require(&quot;./base&quot;); /** * Web Proxy. * * @class * @arg {object} opts - Proxy options. * @arg {string} opts.url - URL which should be proxied. * them from cache. */ var WebProxy = module.exports.WebProxy = function (opts) { BaseProxy.call(this, opts); this._url = opts.url; this._server = null; var parsedUrl = url.parse(this._url); expect([&quot;http:&quot;, &quot;https:&quot;], &quot;Unsupported protocol&quot;).include(parsedUrl.protocol); if (parsedUrl.protocol === &quot;https:&quot;) { this._proxy = httpProxy.createProxyServer({ target: &quot;https://&quot; + parsedUrl.host, agent: https.globalAgent, headers: { host: parsedUrl.hostname }, proxyTimeout: this._timeout, }); } else { this._proxy = httpProxy.createProxyServer({ target: { host: parsedUrl.hostname, port: parsedUrl.port, }, proxyTimeout: this._timeout, }); }; this._proxyUrl = `http://${os.hostname()}:${this._port}`; var app = express(); app.use(async (req, res) =&gt; { this.req = req; this.res = res; for (var mw of middleware) if (await mw.call(this)) return; delete this.req; delete this.res; this._proxy.web(req, res); }); this._server = http.createServer(app); }; util.inherits(WebProxy, BaseProxy); /** * Starts proxy server if it’s not started yet. * * @method */ WebProxy.prototype.start = function () { if (this.isRunning) return; this._server.listen(this._port); this.isRunning = true; }; /** * Stops proxy server if it’s not stopped yet. * * @method */ WebProxy.prototype.stop = function () { if (!this.isRunning) return; this._server.close(); this._proxy.close(); this.isRunning = false; }; × Search results Close "},"reporter_base.js.html":{"id":"reporter_base.js.html","title":"Source: reporter/base.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: reporter/base.js &quot;use strict&quot;; /** * Base reporter. * * @module */ var _ = require(&quot;lodash&quot;); var fs = require(&quot;fs&quot;); var path = require(&quot;path&quot;); var util = require(&quot;util&quot;); var MochaReporter = require(&quot;mocha&quot;).reporters.base; var CONF = require(&quot;../config&quot;); var reporters = []; /** * GlaceJS base reporter. * * @class * @arg {object} runner - mochajs runner. */ var BaseReporter = module.exports = function (runner) { MochaReporter.call(this, runner); runner.on(&quot;start&quot;, () =&gt; { for (var reporter of reporters) { if (reporter.start) reporter.start(); }; }); runner.on(&quot;end&quot;, () =&gt; { for (var reporter of reporters) { if (reporter.end) reporter.end(); }; }); runner.on(&quot;suite&quot;, mochaSuite =&gt; { for (var reporter of reporters) { if (mochaSuite.title !== CONF.curTestCase.name &amp;&amp; reporter.scope) { reporter.scope(mochaSuite); }; if (mochaSuite.title === CONF.curTestCase.name &amp;&amp; reporter.test) { reporter.test(mochaSuite); }; }; }); runner.on(&quot;suite end&quot;, mochaSuite =&gt; { for (var reporter of reporters) { if (mochaSuite.title !== CONF.curTestCase.name &amp;&amp; reporter.scopeEnd) { reporter.scopeEnd(mochaSuite); }; if (mochaSuite.title === CONF.curTestCase.name &amp;&amp; reporter.testEnd) { reporter.testEnd(mochaSuite); }; }; }); runner.on(&quot;test&quot;, mochaTest =&gt; { CONF.curTestCase.addStep(mochaTest.title); for (var reporter of reporters) { if (reporter.step) reporter.step(mochaTest); }; }); runner.on(&quot;test end&quot;, mochaTest =&gt; { for (var reporter of reporters) { if (reporter.stepEnd) reporter.stepEnd(mochaTest); }; }); runner.on(&quot;hook&quot;, mochaHook =&gt; { for (var reporter of reporters) { if (reporter.hook) reporter.hook(mochaHook); }; }); runner.on(&quot;hook end&quot;, mochaHook =&gt; { for (var reporter of reporters) { if (reporter.hookEnd) reporter.hookEnd(mochaHook); }; }); runner.on(&quot;pass&quot;, mochaTest =&gt; { for (var reporter of reporters) { if (reporter.pass) reporter.pass(mochaTest); }; }); runner.on(&quot;fail&quot;, (mochaTest, err) =&gt; { if (CONF.curTestCase) { var step = CONF.curTestCase.getStep({ name: mochaTest.title }); step.isFailed = true; CONF.curTestCase.addError(err); CONF.curTestCase.addFailedParams( _.clone(CONF.curTestCase.testParams)); }; for (var reporter of reporters) { if (reporter.fail) reporter.fail(mochaTest, err); }; }); runner.on(&quot;pending&quot;, mochaTest =&gt; { for (var reporter of reporters) { if (reporter.pending) reporter.pending(mochaTest); }; }); }; /** * Inherits base mocha reporter. */ util.inherits(BaseReporter, MochaReporter); /** * [done description] * @param {[type]} failures [description] * @param {Function} fn [description] * @return {Function} [description] */ BaseReporter.prototype.done = function (failures, fn) { var prms = Promise.resolve(); for (var reporter of reporters) { if (reporter.done) { prms = prms.then(() =&gt; reporter.done()); }; }; prms.then(() =&gt; fn(failures)); }; /** * Registers reporters * * @method * @static * @return {[type]} [description] */ BaseReporter.register = function () { for (var reporter of arguments) { if (!reporters.includes(reporter)) { reporters.push(reporter); }; }; }; /** * Removes reporters * * @method * @static */ BaseReporter.remove = function () { reporters = _.without.apply(_, reporters, arguments); }; × Search results Close "},"reporter_index.js.html":{"id":"reporter_index.js.html","title":"Source: reporter/index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: reporter/index.js &quot;use strict&quot;; /** * GlaceJS reporter package. * * @module */ var base = require(&quot;./base&quot;); var stdout = require(&quot;./stdout&quot;); var testrail = require(&quot;./testrail&quot;); base.register(stdout); if (CONF.toTestrail) base.register(testrail); module.exports = base; × Search results Close "},"reporter_stdout.js.html":{"id":"reporter_stdout.js.html","title":"Source: reporter/stdout.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: reporter/stdout.js &quot;use strict&quot;; /** * Stdout GlaceJS reporter. * * @module */ var colors = require(&quot;colors&quot;); var MochaReporter = require(&quot;mocha&quot;).reporters.base; var indents = 0; var indent = () =&gt; Array(indents).join(&quot; &quot;); var origConsoleLog; var patchConsoleLog = () =&gt; { var reportLog = fs.createWriteStream( path.resolve(process.cwd(), &quot;reporter.log&quot;), { flags : &quot;w&quot; }); origConsoleLog = console.log; console.log = function() { reportLog.write(util.format.apply(null, arguments) + &quot;\\n&quot;); origConsoleLog.apply(this, arguments); }; }; var restoreConsoleLog = () =&gt; { if (origConsoleLog) console.log = origConsoleLog; }; var epilogue = () =&gt; { var indent = &quot; &quot;; var passedTests = []; var failedTests = []; for (var testCase of CONF.testCases) { if (testCase.isFailed()) { failedTests.push(testCase); } else { passedTests.push(testCase); }; }; if (passedTests.length !== 0) { var msg = &quot;passed test&quot; + (passedTests.length === 1 ? &quot;&quot; : &quot;s&quot;); console.log((indent + MochaReporter.symbols.ok + &quot; &quot; + String(passedTests.length).bold + &quot; &quot; + msg).green); }; if (failedTests.length !== 0) { var msg = &quot;failed test&quot; + (failedTests.length === 1 ? &quot;&quot; : &quot;s&quot;); console.log((indent + MochaReporter.symbols.err + &quot; &quot; + String(failedTests.length).bold + &quot; &quot; + msg).red); }; if (failedTests.length === 0) return; console.log(); for (var testCase of failedTests) { console.log((indent + testCase.name).white.bold); console.log(); for(var err of testCase._errors) { console.log((indent + indent + err).grey); console.log(); }; }; }; /** * Stdout reporter. * * @type {Object} */ module.exports = { start: () =&gt; { patchConsoleLog(); }, end: () =&gt; { epilogue(); var reportMsg = &quot;Tests report is &quot; + CONF.reportsDir; console.log(Array(reportMsg.length + 1).join(&quot;-&quot;).yellow); console.log(reportMsg.yellow); restoreConsoleLog(); }, scope: scope =&gt; { ++indents; if (indents !== 1) console.log(); console.log((indent() + &quot;scope: &quot; + scope.title).cyan); }, scopeEnd: scope =&gt; { --indents; if (indents === 1) console.log(); }, test: test =&gt; { ++indents; if (indents !== 1) console.log(); console.log((indent() + &quot;test: &quot; + test.title).cyan); }, testEnd: test =&gt; { --indents; if (indents === 1) console.log(); }, pass: step =&gt; { console.log((indent() + &quot; &quot; + MochaReporter.symbols.ok + &quot; &quot; + &quot;step: &quot; + step.title).green); }, fail: (step, err) =&gt; { console.log((indent() + &quot; &quot; + MochaReporter.symbols.err + &quot; &quot; + &quot;step: &quot; + step.title).red); }, }; × Search results Close "},"runner.js.html":{"id":"runner.js.html","title":"Source: runner.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: runner.js &quot;use strict&quot;; /** * Tests runner * * @module */ var fs = require(&quot;fs&quot;); require(&quot;./globals&quot;); session(() =&gt; { if (!fs.statSync(CONF.testsDir).isDirectory()) { require(CONF.testsDir); return; }; var loadTests = testsDir =&gt; { for (var fileName of fs.readdirSync(testsDir)) { var filePath = path.resolve(testsDir, fileName); if (fileName === &quot;conftest.js&quot;) require(filePath); if (fileName.startsWith(&quot;test&quot;) &amp;&amp; fileName.endsWith(&quot;.js&quot;)) { require(filePath); }; if (fs.lstatSync(filePath).isDirectory()) { loadTests(filePath); }; }; }; loadTests(CONF.testsDir); }); × Search results Close "},"steps_index.js.html":{"id":"steps_index.js.html","title":"Source: steps/index.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: steps/index.js &quot;use strict&quot;; /** * Steps namespace. * * @module */ var _ = require(&quot;lodash&quot;); var CONF = require(&quot;../config&quot;); var U = require(&quot;../utils&quot;); var logger = require(&quot;../logger&quot;); /** * Steps collection which will be executed in test cases. * * @class */ var Steps = module.exports = function () { this._appUrl = CONF.appUrl; this._webdriver = null; }; /** * Sets webdriver. * * It's used for web ui test cases. * * @method * @arg {object} webdriver - Instance of webdriver. */ Steps.prototype.setWebdriver = function (webdriver) { this._webdriver = webdriver; }; /** * Step to make pause in another step or test case. Good style to rid of * its direct usage in test case, only inside other step. * * @async * @arg {number} timeout - Pause time, ms. * @arg {string} message - Pause reason. */ Steps.prototype.pause = async function (timeout, message) { expect(message, &quot;Pause message is not defined&quot;).to.not.be.undefined; logger.stepDebug(&quot;Sleep&quot;, timeout, &quot;ms, reason:&quot;, message); await U.sleep(timeout); }; /** * Registers sequence of objects containing steps. * * @static * @method */ Steps.register = function () { for (var obj of arguments) { _.assign(Steps.prototype, obj); }; }; if (CONF.isWeb) Steps.register(require(&quot;./image&quot;), require(&quot;./proxy&quot;), require(&quot;./video&quot;), require(&quot;./web&quot;)); if (CONF.useXvfb) Steps.register(require(&quot;./xvfb&quot;)); × Search results Close "},"steps_page.js.html":{"id":"steps_page.js.html","title":"Source: steps/page.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: steps/page.js &quot;use strict&quot;; /** * Steps for page. * * @module */ var StepError = require(&quot;../error&quot;).StepError; /** * Steps to manage page. * * @mixin */ module.exports = { /** * Helper to register pages. * * @method * @instance * @this Steps * @arg {...Page} pages - Sequence of pages. */ registerPage: function () { for (var page of arguments) { page.setDriver(this._webdriver); this._pages[page.name] = page; }; }, /** * Helper to remove pages. * * @method * @instance * @this Steps * @arg {...string} pageNames - Sequence of page names. */ removePage: function () { for (var pageName of arguments) { this._pages[pageName].setDriver(null); delete this._pages[pageName]; }; }, /** * Step to open page. * * @method * @instance * @this Steps * @arg {string} pageName - Name of page to open. */ openPage: function (pageName) { var page = this._pages[pageName]; page.open(this.appUrl); }, /** * Step to get current page. * * @method * @instance * @async * @this Steps * @return {Page} - Page which corresponds to current browser URL. * @throws {StepError} - If */ getCurrentPage: async function () { /* sort pages by descending page url length */ var pages = Object.values(this._pages).sort( (a, b) =&gt; a.url.length &lt; b.url.length); var curUrl = url.parse(await this._webdriver.getUrl()); for (var page of pages) { if (curUrl.pathname.startsWith(page.url)) return page; }; throw new StepError( &quot;No one of registered pages corresponds URL '${curUrl}'&quot;); }, }; × Search results Close "},"steps_video.js.html":{"id":"steps_video.js.html","title":"Source: steps/video.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: steps/video.js &quot;use strict&quot;; /** * Steps for video recording. * * @module */ var uuid = require(&quot;uuid/v4&quot;); var U = require(&quot;../utils&quot;); var VideoRecorder = require(&quot;../video&quot;); /** * Steps to manage video recording. * * @mixin */ module.exports = { /** * Step to start video recording. * * @method * @instance * @async * @this Steps * @arg {object} [opts] - Step options. * @arg {string} [opts.name] - File name. Extension `.mpg` will be * added automatically. By default name will be generated with `uuid` * algorithm. * @arg {boolean} [opts.check=true] - Flag to check that video recording * is launched. * @throws {AssertionError} - If video recording isn't launched. */ startVideo: async function (opts) { opts = U.defVal(opts, {}); var fileName = U.defVal(opts.name, uuid()) + &quot;.mpg&quot;; var check = U.defVal(opts.check, true); if (!this._video) this._video = new VideoRecorder(); var opts = {}; _.assign(opts, (await this._driver.windowHandlePosition()).value); _.assign(opts, (await this._driver.windowHandleSize()).value); opts.path = U.mkpath(CONF.reportsDir, CONF.testCase.name, &quot;videos&quot;, fileName); this._video.configure(opts); this._video.start(); await this.pause(1000, &quot;it needs a time to start recording&quot;); if (check) { expect(this._video.isRunning, &quot;Video recording isn't launched&quot;) .to.be.true; }; }, /** * Step to stop video recording. * * @method * @instance * @async * @this Steps * @arg {object} [opts] - step options * @arg {boolean} [opts.check=true] - Flag to check that video recording * is stopped. * @throws {Error} if video recording isn't stoped */ stopVideo: async function (opts) { opts = U.defVal(opts, {}); var check = U.defVal(opts.check, true); await this.pause(1000, &quot;it needs a time to gather latest frames&quot;); await this._video.stop(); if (check) { expect(this._video.isRunning, &quot;Video recording is still running&quot;) .to.be.false; }; return this._video.filePath; }, }; × Search results Close "},"steps_web.js.html":{"id":"steps_web.js.html","title":"Source: steps/web.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: steps/web.js &quot;use strict&quot;; /** * Steps for web applications. * * @module */ var selenium = require(&quot;selenium-standalone&quot;); var logger = require(&quot;../logger&quot;); var U = require(&quot;../utils&quot;); /** * Steps to manage web application. * * @mixin */ module.exports = { /** * Step to install selenium drivers. * * @method * @instance * @async * @this Steps */ installSeleniumDrivers: async function () { var opts = { logger: message =&gt; logger.debug(message) }; await new Promise((resolve, reject) =&gt; { selenium.install(opts, err =&gt; { if (err) reject(err); logger.debug(&quot;Selenium drivers are installed&quot;); resolve(); }); }); }, /** * Step to start selenium server. * * @method * @instance * @async * @this Steps */ startSeleniumServer: async function () { var opts = {}; this._seleniumProc = await new Promise((resolve, reject) =&gt; { selenium.start(opts, (err, child) =&gt; { if (err) reject(err); logger.debug(`Selenium server starts with PID ${child.pid}`); resolve(child); }) }); }, /** * Step to stop selenium server. * * @method * @instance * @this Steps */ stopSeleniumServer: function () { this._seleniumProc.kill(); }, /** * Step to launch browser. * * @method * @instance * @async * @this Steps * @arg {object} [opts] - Step options. * @arg {boolean} [opts.check=true] - Flag to check step result or no. * @throws {Error} - if browser isn't launched */ launchBrowser: async function (opts) { opts = U.defVal(opts, {}); opts.check = U.defVal(opts.check, true); if (this._isBrowserLaunched) return; await this._webdriver.init(); if (opts.check) { expect(await this._webdriver.session(), &quot;Browser isn't launched&quot;).to.not.be.null; }; if (CONF.resolution &amp;&amp; CONF.platform === &quot;pc&quot;) { await this._webdriver.setViewportSize({ width: CONF.resolution.width, height: CONF.resolution.height }); }; this._isBrowserLaunched = true; }, /** * Step to close browser. * * @method * @instance * @async * @this Steps * @arg {object} [opts] - Step options. * @arg {boolean} [opts.check=true] - Flag to check step result or no. * @throws {Error} - if browser isn't closed */ closeBrowser: async function (opts) { opts = U.defVal(opts, {}); opts.check = U.defVal(opts.check, true); if (!this._isBrowserLaunched) return; await this._webdriver.end(); if (opts.check) { expect(await this._webdriver.session(), &quot;Browser isn't closed&quot;).to.be.null; }; this._isBrowserLaunched = false; }, /** * Step to restart browser. * * @method * @instance * @async * @this Steps * @arg {object} [opts] - step options * @arg {boolean} [opts.check=true] - flag to check step result or no */ restartBrowser: async function (opts) { await this.closeBrowser(opts); await this.pause(1000, &quot;between browser restarting&quot;); await this.launchBrowser(opts); }, /** * Step to open page in browser. * * @method * @instance * @async * @this Steps * @arg {string|object} pageUrl - URL or page. */ openPage: async function (webUrl, opts) { await this._webdriver.url(webUrl); }, }; × Search results Close "},"steps_xvfb.js.html":{"id":"steps_xvfb.js.html","title":"Source: steps/xvfb.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: steps/xvfb.js &quot;use strict&quot;; /** * Steps for virtual display. * * @module */ var xvfb = require(&quot;xvfb&quot;); /** * Steps to manage virtual display. * * @mixin */ module.exports = { /** * Step to start virtual display. * * @method * @instance * @this Steps * @arg {object} [opts] - Step options. * @arg {number} [opts.width=1280] - Virtual display width. * @arg {number} [opts.height=720] - Virtual display height. * @arg {number} [opts.depth=24] - Virtual display color depth. * @arg {number} [opts.timeout=1000] - Time to wait for virtual display * will be started, ms. */ startXvfb: function (opts) { opts = opts || {}; var width = opts.width || 1280; var height = opts.height || 720; var depth = opts.depth || 24; var timeout = opts.timeout || 1000; this._xvfb = new Xvfb({ timeout: timeout, xvfb_args: [ `${width}x${height}x${depth}`, &quot;-noreset&quot;, &quot;-ac&quot;] }); this._xvfb.startSync(); }, /** * Step to stop virtual display. * * @method * @instance * @this Steps */ stopXvfb: function () { this._xvfb.stopSync(); }, }; × Search results Close "},"testing.js.html":{"id":"testing.js.html","title":"Source: testing.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: testing.js &quot;use strict&quot;; /** * Data structures related with test cases. * * @module */ var _ = require(&quot;lodash&quot;); /** * Test case data structure. * * Contains full information and history about test case. * * @method * @arg {string} name - Test case name. */ var TestCase = module.exports.TestCase = function (name) { this.name = name; }; /** * Resets test case info. * * @method */ TestCase.prototype.reset = function () { this._screenshots = []; this._steps = []; this._errors = []; this._failedParams = []; this.testParams = []; }; /** * Adds failed params if they don't exist. * * @method * @arg {object} params - Params which test was failed with. */ TestCase.prototype.addFailedParams = function (params) { for (var failed of this._failedParams) { if (_.isEqual(params, failed)) break; }; this._failedParams.add(params); }; /** * Gets executed test steps. * * It makes clone of current array of steps in order to get its replica. * * @method * @return {TestStep[]} - List of executed steps. */ TestCase.prototype.getSteps = function () { return _.clone(this._steps); }; /** * Gets test step with filter. * * @arg {object} [opts] - Filter options. * @arg {string} [opts.name] - Step name. * @return {TestStep} - Step which matches requested options. */ TestCase.prototype.getStep = function (opts) { opts = opts || {}; var steps = this.getSteps(); if (opts.name) { var filteredSteps = []; for (var step of steps) { if (step.name === opts.name) { filteredSteps.push(step); break; }; }; steps = filteredSteps; }; return steps[0]; }; /** * Adds executed step to test case. * * @method * @arg {string} name - Step name. * @arg {boolean} isFailed - Flag whether step is failed or no. */ TestCase.prototype.addStep = function (name, isFailed) { this._steps.push(new TestStep(name, isFailed)); }; /** * Adds error in step to test case. * * @method * @arg {Error} err - Error. */ TestCase.prototype.addError = function (err) { this._errors.push(err.message + &quot;\\n&quot; + err.stack); }; /** * Adds screenshot. * * @method * @arg {string} imagePath - Path to saved screenshot. */ TestCase.prototype.addScreenshot = function (imagePath) { this._screenshots.push(imagePath); }; /** * Defines whether test case is failed on some stage. By default from start. * * @method * @arg {TestStep[]} [stepsBefore=[]] - List of steps which should be skipped. * @return {boolean} - `true` if test case is failed, `false` otherwise. */ TestCase.prototype.isFailed = function (stepsBefore) { stepsBefore = stepsBefore || []; for (var step of this._steps) { if (stepsBefore.includes(step)) continue; if (step.isFailed) return true; }; return false; }; /** * Test step data structure. * * @class * @arg {string} name - Step name. * @arg {boolean} isFailed - Flag whether step is failed or no. */ var TestStep = module.exports.TestStep = function (name, isFailed) { this.name = name; this.isFailed = !!isFailed; }; × Search results Close "},"reporter_testrail.js.html":{"id":"reporter_testrail.js.html","title":"Source: reporter/testrail.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: reporter/testrail.js 'use strict'; /** * Contains functions to report test results to testrail. * * @module testrail-reporter */ var fs = require('fs'); var path = require(&quot;path&quot;); var util = require('util'); var _ = require(&quot;lodash&quot;); var mocha = require('mocha'); var colors = require('colors/safe'); var Base = mocha.reporters.base; var inherits = mocha.utils.inherits; var Testrail = require('testrail-api'); var CONF = require('../config'); var utils = require('../utils'); var publishing = Promise.resolve(); var reportCases = {}; var TestrailResults = { PASSED: 1, BLOCKED: 2, UNTESTED: 3, RETEST: 4, FAILED: 5 }; var testrail; var projectId = CONF.testRail.project; var suiteId = CONF.testRail.suites[CONF.suite]; if (suiteId &amp;&amp; CONF.publishResults) { testrail.getCases(projectId, { suite_id: suiteId }, function (err, cases) { if (err) throw err; cases.forEach(function (testrailCase, index, cases) { reportCases[testrailCase.title] = { id: testrailCase.id }; }); }); } module.exports = { start: () =&gt; { testrail = new Testrail({ host: CONF.testRail.host, user: CONF.testRail.user, password: CONF.testRail.password }); var description = &quot;&quot;; testrail.addRun( projectId, { suite_id: suiteId, // required name: CONF.suite, // required description: description // required }, (err, run) =&gt; { CONF.testRail.runId = run.id; } ); }, end: () =&gt; { var reportMsg = &quot;Tests report is &quot; + CONF.testRail.reportUrl + CONF.testRail.runId; console.log(colors.report(Array(reportMsg.length + 1).join('-'))); console.log(colors.report(reportMsg)); }, fail: (step, err) =&gt; { var reportCase, stepTitle = mochaTest.title; var parent = mochaTest.parent; while (parent) { if (parent.title in reportCases) { reportCase = reportCases[parent.title]; break; } parent = parent.parent; } if (reportCase) { if (!reportCase.failedSteps) reportCase.failedSteps = {}; reportCase.failedSteps[stepTitle] = err.message + '\\n' + err.stack; } }, testEnd: test =&gt; { var reportCase = reportCases[mochaSuite.title]; var caseId = (reportCase || {}).id; if (caseId) { var screensMsg = ''; CONF.testCase.screenshots.forEach(screenPath =&gt; { screensMsg += 'file:\\\\' + screenPath + '\\n'; }); var testResult = { status_id: TestrailResults.PASSED, comment: 'Screenshots:\\n' + screensMsg + '\\n\\n' }; var videosMsg = &quot;&quot;; CONF.testCase.videos.forEach(videoPath =&gt; { videosMsg += &quot;file:\\\\&quot; + videoPath + &quot;\\n&quot;; }); if (videosMsg) testResult.comment += &quot;Videos:\\n&quot; + videosMsg + &quot;\\n\\n&quot;; if (!utils.isEmpty(reportCase.failedSteps)) { testResult.status_id = TestrailResults.FAILED; for (var step in reportCase.failedSteps) { var errMsg = reportCase.failedSteps[step]; testResult.comment += 'step: ' + step + '\\nerror: ' + errMsg + '\\n\\n'; } } publishing = publishing.then(() =&gt; { return new Promise((resolve, reject) =&gt; { testrail.addResultForCase(CONF.testRail.runId, caseId, testResult, (err, res) =&gt; { if (err) reject(err); resolve(res); }); }); }); }; }, done: () =&gt; { return publishing; }, }; × Search results Close "},"utils.js.html":{"id":"utils.js.html","title":"Source: utils.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: utils.js &quot;use strict&quot;; /** * Contains utils and helpers. * * @module utils */ var fs = require(&quot;fs&quot;); var path = require(&quot;path&quot;); var _ = require(&quot;lodash&quot;); var mkdirp = require(&quot;mkdirp&quot;); /** * Gets default value for variable among passed listed values. * * @function * @arg {...*} value - variable value * @return {*} - last specified value or null if last is undefined. */ module.exports.defVal = function () { for (var arg of arguments) if (typeof arg !== &quot;undefined&quot;) return arg; return null; }; /** * Capitalizes first letter of string. Doesn&quot;t influence to case * of other letters. * * @function * @param {string} string - string to capitalize * @return {string} - capitalized string */ module.exports.capitalize = string =&gt; { return string.charAt(0).toUpperCase() + string.slice(1); } /** * Defines is node a leaf in tree according by its id. * * @arg {object} root - tree root * @return {function} - function to define node leaf status with closed root */ module.exports.isLeaf = root =&gt; { var _isLeaf = (nodeId, nodes) =&gt; { nodes = nodes || root; for (var key in nodes) { var node = nodes[key]; if (_.isEmpty(node)) { if (key === nodeId) return true; else continue; }; var isIt = _isLeaf(nodeId, node); if (isIt) return true; }; return false; }; return _isLeaf; }; /** * Clears empty folders recursive. * * @function * @arg {string} folder - path to root folder */ var clearEmptyFolders = module.exports.clearEmptyFolders = folder =&gt; { var files = fs.readdirSync(folder); for (var fileName of files) { var filePath = path.join(folder, fileName); if (fs.statSync(filePath).isDirectory()) clearEmptyFolders(filePath); }; if (!_.isEmpty(files)) files = fs.readdirSync(folder); if (_.isEmpty(files)) fs.rmdirSync(folder); }; /** * Makes delay (sleep) during code execution. * * @param {number} timeout - Time to sleep, ms. * @param {boolean} [blocking=false] - Flag whether sleep should be * block code execution. * @return {Promise} - If sleep isn't blocking. */ module.exports.sleep = (timeout, blocking) =&gt; { blocking = !!blocking; if (blocking) { (ms =&gt; { ms += new Date().getTime(); while (new Date &lt; ms) {}; })(timeout); } else { return new Promise(resolve =&gt; { setTimeout(resolve, timeout); }); }; }; /** * Composes file path from segments. If folder of file is absent, it will * be created. * * @function * @arg {...string} paths - A sequence of paths or path segments. * @return {string} - Composed path. */ module.exports.mkpath = function () { var result = path.resolve.apply(path, arguments); var dirname = path.dirname(result); mkdirp.sync(dirname); return result; }; × Search results Close "},"video.js.html":{"id":"video.js.html","title":"Source: video.js","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Source: video.js &quot;use strict&quot;; /** * Classes and functions for video recording. * * @module */ var spawn = require(&quot;cross-spawn&quot;); var path = require(&quot;path&quot;); var U = require(&quot;./utils&quot;); /** * Creates a new instance of VideoRecorder. * * @class * @classdesc contains methods to record video for tests * @property {boolean} isRunning=false - flag is video recorder running or no * @property {?string} filePath=null - path video file */ var VideoRecorder = module.exports = function () { this.isRunning = false; this.filePath = null; this._process = null; this._recordCmd = &quot;ffmpeg&quot;; this._recordOpts = null; }; /** * Configures video recorder. * * @method * @arg {object} [opts] - recorder configuration * @arg {number} [opts.fps=30] - video framerate * @arg {number} [opts.width=1024] - video width * @arg {number} [opts.height=768] - video height * @arg {number} [opts.x=0] - `X`-offset on display * @arg {number} [opts.y=0] - `Y`-offset on display */ VideoRecorder.prototype.configure = function (opts) { opts = U.defVal(opts, {}); opts.fps = U.defVal(opts.fps, 30); opts.width = U.defVal(opts.width, 1024); opts.height = U.defVal(opts.height, 768); opts.x = U.defVal(opts.x, 0); opts.y = U.defVal(opts.y, 0); opts.size = opts.width + &quot;x&quot; + opts.height; this.filePath = U.defVal(opts.path, path.resolve(__dirname, &quot;output.mpg&quot;)); this._recordOpts = [ &quot;-y&quot;, &quot;-loglevel&quot;, &quot;quiet&quot;, &quot;-video_size&quot;, opts.size, &quot;-offset_x&quot;, opts.x, &quot;-offset_y&quot;, opts.y, &quot;-draw_mouse&quot;, 0, &quot;-framerate&quot;, opts.fps, &quot;-f&quot;, &quot;gdigrab&quot;, &quot;-i&quot;, &quot;desktop&quot;, &quot;-vcodec&quot;, &quot;libx264&quot;, this.filePath ]; }; /** * Starts video recorder. * * @method * @throws {Error} if video recorder is started already * @throws {Error} if video recorder isn't configured yet */ VideoRecorder.prototype.start = function () { if (this.isRunning) throw new Error(&quot;Video recorder is started already&quot;); if (!this._recordOpts) throw new Error(&quot;Video recorder isn't configured yet&quot;); this._process = spawn(this._recordCmd, this._recordOpts, { killSignal: &quot;SIGINT&quot; }); this.isRunning = true; }; /** * Stops video recorder. * * @method * @throws {Error} if video recorder isn't started yet */ VideoRecorder.prototype.stop = function () { if (!this.isRunning) throw new Error(&quot;Video recorder isn't started yet&quot;); return new Promise((resolve, reject) =&gt; { var result = this._process.kill(&quot;SIGINT&quot;); if (!result) { reject(&quot;Some &quot; + this._recordCmd + &quot; error, video wasn't captured&quot;); } else { this._process.on(&quot;exit&quot;, (code, signal) =&gt; { this.isRunning = false; resolve(); }); }; }); }; × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Global Members cacheManager Source: proxy/middleware/cache.js, line 6 module:reporter/stdout :Object Stdout reporter. Type: Object Source: reporter/stdout.js, line 74 Methods afterSession(ctx) Hook to execute after tests session. May be overridden. Parameters: Name Type Description ctx object Session context. Source: globals.js, line 107 afterStep(name, func) Hook to be executed after each test step. Parameters: Name Type Description name string Name of test case. func function Hook function. Source: globals.js, line 215 baseTest(name, func) Basis for any test case. If test with the same was registered already, this test will be omitted with corresponding error in log. If retries amount is specified and this test was failed, the test will be added to queue in separated session with title containing Retry and its number. Parameters: Name Type Description name string Name of test case. func function Test function. Source: globals.js, line 128 beforeSession(ctx) Hook to execute before tests session. May be overridden. Parameters: Name Type Description ctx object Session context. Source: globals.js, line 88 beforeStep(name, func) Hook to be executed before each test step. Parameters: Name Type Description name string Name of test case. func function Hook function. Source: globals.js, line 206 expect() Verification matcher with expanded abilities. Source: globals.js, line 18 forEachLanguage(ctx, func) Hook to iterate test steps through all languages specifed in configuration. It's applicable for multilingual application. If list of languages is specified, it will be used firstly. Otherwise from configuration. Parameters: Name Type Description ctx object Test case context. func function Function with test steps. Source: globals.js, line 227 fromCache(req, res) Patches http response to send response from cache, if it is there. Parameters: Name Type Description req object http(s) request res object http(s) response Source: proxy/middleware/cache.js, line 41 Returns: true if response is in cache and was patched, otherwise false Type Promise.&lt;boolean&gt; module:proxy/middleware/info() Middleware to gather information about requests and responses. Source: proxy/middleware/info.js, line 29 scope() Tests scope. Source: globals.js, line 44 session( [name] [, ctx], func) Tests session. Parameters: Name Type Argument Description name string &lt;optional&gt; Session name. By default it includes start date time. ctx object &lt;optional&gt; Session context. By default it's empty. func function Function with test cases. Source: globals.js, line 60 step(name, func) Test step. Contains actions and verifications, which will be executed separatly from another steps. It is not the same as SS. SS is namespace with atomic application actions. But this function is used to organize test structure and to allocate independent test actions. Parameters: Name Type Description name string Name of test case. func function Step function. Source: globals.js, line 197 test(name, func) Test case. Parameters: Name Type Description name string Name of test case. func function Test function. Source: globals.js, line 179 toCache(req, res) Patches http response to put response to cache. Parameters: Name Type Description req object http(s) request res object http(s) response Source: proxy/middleware/cache.js, line 69 × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Modules Classes ConfigError GlaceError StepError Image Control PointerEvents BaseProxy GlobalProxy WebProxy BaseReporter Steps TestStep VideoRecorder Mixins module:steps/page module:steps/video module:steps/web module:steps/xvfb Namespaces CONF SS × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Classes Classes ConfigError GlaceError StepError Image Control PointerEvents BaseProxy GlobalProxy WebProxy BaseReporter Steps TestStep VideoRecorder Mixins module:steps/page module:steps/video module:steps/web module:steps/xvfb Namespaces CONF SS × Search results Close "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Namespaces Classes ConfigError GlaceError StepError Image Control PointerEvents BaseProxy GlobalProxy WebProxy BaseReporter Steps TestStep VideoRecorder Mixins module:steps/page module:steps/video module:steps/web module:steps/xvfb Namespaces CONF SS × Search results Close "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Tutorials Classes ConfigError GlaceError StepError Image Control PointerEvents BaseProxy GlobalProxy WebProxy BaseReporter Steps TestStep VideoRecorder Mixins module:steps/page module:steps/video module:steps/web module:steps/xvfb Namespaces CONF SS × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Glace (from the French. glacé — ice, frozen) is a cold drink based on coffee with the addition of ice cream. As the ware is typically used glass-glass or glass. Glacejs is functional testing framework based on mochajs. × Search results Close "},"CONF.html":{"id":"CONF.html","title":"Namespace: CONF","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Namespace: CONF CONF Framework and tests config. Source: globals.js, line 25 × Search results Close "},"module-cli.html":{"id":"module-cli.html","title":"Module: cli","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: cli Contains functions to execute tests via command line interface. Source: cli.js, line 2 Methods &lt;static&gt; run() Runs tests. executes runner.js file, which is entry point to load and execute files with tests connects custom reporter to mochajs. Source: cli.js, line 21 × Search results Close "},"module-config.html":{"id":"module-config.html","title":"Module: config","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: config Configuration of framework and executed test cases. It also may be used as a bus to read/write data and share it among components and objects. Source: config.js, line 2 × Search results Close "},"module-error.html":{"id":"module-error.html","title":"Module: error","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: error Framework errors. Source: error.js, line 2 Classes ConfigError GlaceError StepError × Search results Close "},"module-error-ConfigError.html":{"id":"module-error-ConfigError.html","title":"Class: ConfigError","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: ConfigError error~ ConfigError new ConfigError(message) Config error. Parameters: Name Type Description message string Error message. Source: error.js, line 26 × Search results Close "},"module-error-GlaceError.html":{"id":"module-error-GlaceError.html","title":"Class: GlaceError","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: GlaceError error~ GlaceError new GlaceError(message) Base framework error. Parameters: Name Type Description message string Error message. Source: error.js, line 16 × Search results Close "},"module-error-StepError.html":{"id":"module-error-StepError.html","title":"Class: StepError","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: StepError error~ StepError new StepError(message) Step error. Parameters: Name Type Description message string Error message. Source: error.js, line 36 × Search results Close "},"module-globals.html":{"id":"module-globals.html","title":"Module: globals","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: globals Global framework functions and helpers. Source: globals.js, line 2 Members &lt;inner&gt; sessNum :Number Executed sessions counter. Type: Number Source: globals.js, line 50 × Search results Close "},"module-image.html":{"id":"module-image.html","title":"Module: image","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: image Describes image processing. Source: image.js, line 2 Classes Image × Search results Close "},"module-image-Image.html":{"id":"module-image-Image.html","title":"Class: Image","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: Image image~ Image new Image(srcPath [, srcOpts]) Creates new instance of Image. Parameters: Name Type Argument Description srcPath string path to processed image srcOpts object &lt;optional&gt; image options Properties Name Type Argument Description scaleX number &lt;optional&gt; image current scale value on X axis scaleY number &lt;optional&gt; image current scale value on Y axis Source: image.js, line 20 Methods &lt;protected&gt; _cropPixels(pixels) Crops pixels, removes empty rows and columns. Parameters: Name Type Description pixels Array.&lt;Array.&lt;object&gt;&gt; pixels matrix Source: image.js, line 275 Returns: cropped pixels matrix Type Array.&lt;Array.&lt;object&gt;&gt; &lt;protected&gt; _cropTop(pixels) Crops top part of pixels matrix. Parameters: Name Type Description pixels Array.&lt;Array.&lt;object&gt;&gt; pixels matrix Source: image.js, line 296 Returns: cropped pixels matrix Type Array.&lt;Array.&lt;object&gt;&gt; &lt;protected&gt; _getDiffValue(srcPixels, dstPixels, offsetX, offsetY) Calculates difference between source pixels and destination pixels. Parameters: Name Type Description srcPixels Array.&lt;Array.&lt;object&gt;&gt; source pixels matrix dstPixels Array.&lt;Array.&lt;object&gt;&gt; destination pixels matrix offsetX number source left border offset offsetY number source top border offset Source: image.js, line 187 Returns: difference value Type number &lt;protected&gt; _getPixels(img) Retrieves pixels from image data. Parameters: Name Type Description img object image data Source: image.js, line 246 Returns: pixels matrix Type Array.&lt;Array.&lt;object&gt;&gt; &lt;protected&gt; _includes(src, dst) Defines whether one image data includes another. Parameters: Name Type Description src object source image data dst object destination image data, which is potentially included Source: image.js, line 128 Returns: result Type object &lt;protected&gt; _isPixelTolerant(srcPixel, dstPixel) Defines whether source pixel is tolerant to destination pixel. Parameters: Name Type Description srcPixel object source pixel dstPixel object destination pixel Source: image.js, line 228 Returns: true if pixels are tolerant, false otherwise Type boolean &lt;protected&gt; _isPixelUsed(pixel) Defines whether pixel should be used for difference calculation or no, according its alpha value. Parameters: Name Type Description pixel object pixel Source: image.js, line 216 Returns: true if should be, false otherwise Type boolean &lt;protected&gt; _loadImg(imgPath, imgOpts) Loads image. Parameters: Name Type Description imgPath string path loaded image imgOpts object image options Source: image.js, line 92 Returns: image data Type Promise.&lt;object&gt; &lt;protected&gt; _saveMatchImage(left, top, width, height) Saves matched part of image. Parameters: Name Type Description left number offset from left image border top number offset from top image border width number width of matched part height number height of matched part Source: image.js, line 114 Returns: Type Promise _transpose(pixels) Transposes pixels matrix. Parameters: Name Type Description pixels Array.&lt;Array.&lt;object&gt;&gt; pixels matrix Source: image.js, line 328 Returns: transposed pixels matrix Type Array.&lt;Array.&lt;object&gt;&gt; includes(dstPath [, dstOpts]) Defines if processed image includes specified image. Parameters: Name Type Argument Description dstPath string path to potentially included image dstOpts object &lt;optional&gt; included image options Properties Name Type Argument Default Description tolerance number &lt;optional&gt; 0.05 comparison tolerance matchedPath string &lt;optional&gt; &lt;nullable&gt; null path to same captured place saveMatch boolean &lt;optional&gt; false flag to capture images intersection or no Source: image.js, line 44 Returns: result Type Promise.&lt;object&gt; × Search results Close "},"module-index.html":{"id":"module-index.html","title":"Module: index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: index Main GlaceJS module. Source: index.js, line 3 × Search results Close "},"module-logger.html":{"id":"module-logger.html","title":"Module: logger","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: logger Configures framework logging. Source: logger.js, line 2 × Search results Close "},"module-page_element.html":{"id":"module-page_element.html","title":"Module: page/element","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: page/element Defines classes responsible for interaction with DOM in browser context. Source: page/element.js, line 2 Classes Control × Search results Close "},"module-page_element-Control.html":{"id":"module-page_element-Control.html","title":"Class: Control","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: Control page/element~ Control new Control(name, driver) Creates a new instance of Control. Control binds DOM control in browser context with virtual control in test. Parameters: Name Type Description name string control name driver object selenium driver instance Source: page/element.js, line 22 Methods click() Clicks control in browser. Source: page/element.js, line 91 Returns: result of selenium execution in browser context Type Promise.&lt;*&gt; getText() Gets text content of DOM element. Source: page/element.js, line 37 Returns: text value or null Type Promise.&lt;string&gt; isExist() Defines whether control is exist or no. Source: page/element.js, line 123 Returns: true if control is exist, false otherwise Type Promise.&lt;boolean&gt; isSelected() Defines whether control is selected or no. Source: page/element.js, line 108 Returns: true if control is selected, false otherwise Type Promise.&lt;boolean&gt; isVisible() Defines whether control is visible or no. Source: page/element.js, line 167 Returns: true if control is visible, false otherwise Type Promise.&lt;boolean&gt; location() Gets DOM control location with attributes: x, y, midX, midY, width, height Source: page/element.js, line 56 Returns: location of control Type Promise.&lt;object&gt; scrollIntoView() Scrolls control into browser viewport. Source: page/element.js, line 78 Returns: result of javascript execution in browser context Type Promise.&lt;*&gt; tap() Taps control in browser. Source: page/element.js, line 101 waitForExist( [timeout]) Waits for control is exist. Parameters: Name Type Argument Description timeout number &lt;optional&gt; timeout to wait, ms Source: page/element.js, line 137 Throws: If control isn't exist after timeout. Type TimeoutError Returns: result of selenium execution Type Promise.&lt;*&gt; waitForInvisible( [timeout]) Waits for control is invisible. Parameters: Name Type Argument Description timeout number &lt;optional&gt; timeout to wait, ms Source: page/element.js, line 197 Throws: If control is still visible after timeout. Type TimeoutError Returns: result of selenium execution Type Promise.&lt;*&gt; waitForNonExist( [timeout]) Waits for control isn't exist. Parameters: Name Type Argument Description timeout number &lt;optional&gt; timeout to wait, ms Source: page/element.js, line 153 Throws: If control is still exist after timeout. Type TimeoutError Returns: result of selenium execution Type Promise.&lt;*&gt; waitForVisible( [timeout]) Waits for control is visible. Parameters: Name Type Argument Description timeout number &lt;optional&gt; timeout to wait, ms Source: page/element.js, line 181 Throws: If control isn't visible after timeout. Type TimeoutError Returns: result of selenium execution Type Promise.&lt;*&gt; × Search results Close "},"module-page_event.html":{"id":"module-page_event.html","title":"Module: page/event","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: page/event Browser events. Source: page/event.js, line 2 Classes PointerEvents × Search results Close "},"module-page_event-PointerEvents.html":{"id":"module-page_event-PointerEvents.html","title":"Class: PointerEvents","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: PointerEvents page/event~ PointerEvents Contains browser pointer events. new PointerEvents() Creates a new pointer events instance. Source: page/event.js, line 15 Methods cancel(selector, x, y) Cancel pointer on element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 121 Returns: webdriverio instance Type object down(selector, x, y) Presses pointer down on element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 67 Returns: webdriverio instance Type object enter(selector, x, y) Enters pointer to element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 49 Returns: webdriverio instance Type object leave(selector, x, y) Leaves pointer from element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 157 Returns: webdriverio instance Type object move(selector, x, y) Moves pointer to element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 103 Returns: webdriverio instance Type object out(selector, x, y) Moves out pointer from element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 139 Returns: webdriverio instance Type object over(selector, x, y) Moves pointer over element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 31 Returns: webdriverio instance Type object up(selector, x, y) Unpresses pointer up on element by selector. Parameters: Name Type Description selector string css selector x integer x coordinate y integer y coordinate Source: page/event.js, line 85 Returns: webdriverio instance Type object × Search results Close "},"module-page_index.html":{"id":"module-page_index.html","title":"Module: page/index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: page/index Page. Source: page/index.js, line 2 × Search results Close "},"module-proxy_base.html":{"id":"module-proxy_base.html","title":"Module: proxy/base","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/base Base proxy. Source: proxy/base.js, line 2 Classes BaseProxy × Search results Close "},"module-proxy_base-BaseProxy.html":{"id":"module-proxy_base-BaseProxy.html","title":"Class: BaseProxy","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: BaseProxy proxy/base~ BaseProxy &lt;abstract&gt; new BaseProxy() Base proxy. Source: proxy/base.js, line 16 Methods getResponsesData() Gets responses data. Source: proxy/base.js, line 65 measureResponses() Starts to measure responses and gather information of them. Source: proxy/base.js, line 49 resetSpeed() Resets speed of responses. Source: proxy/base.js, line 41 setSpeed(speed) Sets speed of responses from proxy to client. Parameters: Name Type Description speed number Proxy responses speed. kb/s. Source: proxy/base.js, line 33 start() Starts proxy. Source: proxy/base.js, line 74 stop() Stops proxy server. Source: proxy/base.js, line 82 unmeasureResponses() Disables responses measurement. Source: proxy/base.js, line 57 × Search results Close "},"module-proxy_globalProxy.html":{"id":"module-proxy_globalProxy.html","title":"Module: proxy/globalProxy","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/globalProxy Describes global transparent proxy. Source: proxy/globalProxy.js, line 2 Classes GlobalProxy × Search results Close "},"module-proxy_globalProxy-GlobalProxy.html":{"id":"module-proxy_globalProxy-GlobalProxy.html","title":"Class: GlobalProxy","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: GlobalProxy proxy/globalProxy~ GlobalProxy Contains methods to run and manage global transparent proxy. new GlobalProxy( [opts]) Creates new instance of GlobalProxy. Parameters: Name Type Argument Description opts object &lt;optional&gt; global proxy options Properties Name Type Argument Default Description port number &lt;optional&gt; 8080 global proxy port timeout number &lt;optional&gt; 0 global proxy timeout installCertificate boolean &lt;optional&gt; false flag to install global proxy certificate as trusted in order to manage https connection or no rootPath string &lt;optional&gt; &lt;nullable&gt; Folder where proxy starts in order to generate self-signed certificate. By default is current work directory. useCache boolean &lt;optional&gt; false flag to cache and take from cache responses Source: proxy/globalProxy.js, line 34 Methods start() Starts global proxy if it&quot;s not started yet. Source: proxy/globalProxy.js, line 70 stop() Stops global proxy if it&quot;s not stopped yet. Source: proxy/globalProxy.js, line 115 × Search results Close "},"module-proxy_index.html":{"id":"module-proxy_index.html","title":"Module: proxy/index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/index Proxy package. Source: proxy/index.js, line 2 × Search results Close "},"module-proxy_middleware_index.html":{"id":"module-proxy_middleware_index.html","title":"Module: proxy/middleware/index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/middleware/index Proxy middleware package. Source: proxy/middleware/index.js, line 2 × Search results Close "},"module-proxy_middleware_info.html":{"id":"module-proxy_middleware_info.html","title":"Module: proxy/middleware/info","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/middleware/info Contains proxy middlewares (require(&quot;proxy/middleware/info&quot;))() Middleware to gather information about requests and responses. Source: proxy/middleware/info.js, line 29 × Search results Close "},"module-proxy_middleware_speed.html":{"id":"module-proxy_middleware_speed.html","title":"Module: proxy/middleware/speed","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/middleware/speed Middleware to manage responses speed. Source: proxy/middleware/speed.js, line 2 Methods &lt;static&gt; changeResponsesSpeed(res, speed) Middleware to change responses speed. Parameters: Name Type Description res object http(s) response speed number limited speed value, kb/s Source: proxy/middleware/speed.js, line 15 × Search results Close "},"module-proxy_proxy.html":{"id":"module-proxy_proxy.html","title":"Module: proxy/proxy","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: proxy/proxy Web Proxy classes and functions. Source: proxy/proxy.js, line 2 Classes WebProxy × Search results Close "},"module-proxy_proxy-WebProxy.html":{"id":"module-proxy_proxy-WebProxy.html","title":"Class: WebProxy","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: WebProxy proxy/proxy~ WebProxy new WebProxy(opts) Web Proxy. Parameters: Name Type Description opts object Proxy options. Properties Name Type Description url string URL which should be proxied. them from cache. Source: proxy/proxy.js, line 30 Methods start() Starts proxy server if it’s not started yet. Source: proxy/proxy.js, line 82 stop() Stops proxy server if it’s not stopped yet. Source: proxy/proxy.js, line 92 × Search results Close "},"module-reporter_base.html":{"id":"module-reporter_base.html","title":"Module: reporter/base","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: reporter/base Base reporter. Source: reporter/base.js, line 2 Classes BaseReporter × Search results Close "},"module-reporter_base-BaseReporter.html":{"id":"module-reporter_base-BaseReporter.html","title":"Class: BaseReporter","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: BaseReporter reporter/base~ BaseReporter new BaseReporter(runner) GlaceJS base reporter. Parameters: Name Type Description runner object mochajs runner. Source: reporter/base.js, line 24 Methods &lt;static&gt; register() Registers reporters Source: reporter/base.js, line 143 Returns: &lt;static&gt; remove() Removes reporters Source: reporter/base.js, line 156 done(failures, fn) [done description] Parameters: Name Type Description failures fn function [description] Source: reporter/base.js, line 127 Returns: [description] Type function × Search results Close "},"module-reporter_index.html":{"id":"module-reporter_index.html","title":"Module: reporter/index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: reporter/index GlaceJS reporter package. Source: reporter/index.js, line 2 × Search results Close "},"module-reporter_stdout.html":{"id":"module-reporter_stdout.html","title":"Module: reporter/stdout","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: reporter/stdout Stdout GlaceJS reporter. Source: reporter/stdout.js, line 2 × Search results Close "},"module-runner.html":{"id":"module-runner.html","title":"Module: runner","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: runner Tests runner Source: runner.js, line 2 × Search results Close "},"module-steps_index.html":{"id":"module-steps_index.html","title":"Module: steps/index","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: steps/index Steps namespace. Source: steps/index.js, line 2 Classes Steps × Search results Close "},"module-steps_index-Steps.html":{"id":"module-steps_index-Steps.html","title":"Class: Steps","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: Steps steps/index~ Steps new Steps() Steps collection which will be executed in test cases. Source: steps/index.js, line 18 Methods &lt;static&gt; register() Registers sequence of objects containing steps. Source: steps/index.js, line 52 pause(timeout, message) Step to make pause in another step or test case. Good style to rid of its direct usage in test case, only inside other step. Parameters: Name Type Description timeout number Pause time, ms. message string Pause reason. Source: steps/index.js, line 41 setWebdriver(webdriver) Sets webdriver. It's used for web ui test cases. Parameters: Name Type Description webdriver object Instance of webdriver. Source: steps/index.js, line 30 × Search results Close "},"module-steps_page.html":{"id":"module-steps_page.html","title":"Mixin: module:steps/page","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Mixin: module:steps/page module:steps/page Steps to manage page. Source: steps/page.js, line 14 Methods getCurrentPage() Step to get current page. This: Steps Source: steps/page.js, line 65 Throws: If Type StepError Returns: Page which corresponds to current browser URL. Type Page openPage(pageName) Step to open page. This: Steps Parameters: Name Type Description pageName string Name of page to open. Source: steps/page.js, line 51 registerPage(pages) Helper to register pages. This: Steps Parameters: Name Type Argument Description pages Page &lt;repeatable&gt; Sequence of pages. Source: steps/page.js, line 23 removePage(pageNames) Helper to remove pages. This: Steps Parameters: Name Type Argument Description pageNames string &lt;repeatable&gt; Sequence of page names. Source: steps/page.js, line 37 × Search results Close "},"module-steps_video.html":{"id":"module-steps_video.html","title":"Mixin: module:steps/video","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Mixin: module:steps/video module:steps/video Steps to manage video recording. Source: steps/video.js, line 17 Methods startVideo( [opts]) Step to start video recording. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; Step options. Properties Name Type Argument Default Description name string &lt;optional&gt; File name. Extension .mpg will be added automatically. By default name will be generated with uuid algorithm. check boolean &lt;optional&gt; true Flag to check that video recording is launched. Source: steps/video.js, line 33 Throws: If video recording isn't launched. Type AssertionError stopVideo( [opts]) Step to stop video recording. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; step options Properties Name Type Argument Default Description check boolean &lt;optional&gt; true Flag to check that video recording is stopped. Source: steps/video.js, line 72 Throws: if video recording isn't stoped Type Error × Search results Close "},"module-steps_web.html":{"id":"module-steps_web.html","title":"Mixin: module:steps/web","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Mixin: module:steps/web module:steps/web Steps to manage web application. Source: steps/web.js, line 17 Methods closeBrowser( [opts]) Step to close browser. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; Step options. Properties Name Type Argument Default Description check boolean &lt;optional&gt; true Flag to check step result or no. Source: steps/web.js, line 111 Throws: if browser isn't closed Type Error installSeleniumDrivers() Step to install selenium drivers. This: Steps Source: steps/web.js, line 26 launchBrowser( [opts]) Step to launch browser. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; Step options. Properties Name Type Argument Default Description check boolean &lt;optional&gt; true Flag to check step result or no. Source: steps/web.js, line 82 Throws: if browser isn't launched Type Error openPage(pageUrl) Step to open page in browser. This: Steps Parameters: Name Type Description pageUrl string | object URL or page. Source: steps/web.js, line 149 restartBrowser( [opts]) Step to restart browser. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; step options Properties Name Type Argument Default Description check boolean &lt;optional&gt; true flag to check step result or no Source: steps/web.js, line 135 startSeleniumServer() Step to start selenium server. This: Steps Source: steps/web.js, line 49 stopSeleniumServer() Step to stop selenium server. This: Steps Source: steps/web.js, line 68 × Search results Close "},"module-steps_xvfb.html":{"id":"module-steps_xvfb.html","title":"Mixin: module:steps/xvfb","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Mixin: module:steps/xvfb module:steps/xvfb Steps to manage virtual display. Source: steps/xvfb.js, line 14 Methods startXvfb( [opts]) Step to start virtual display. This: Steps Parameters: Name Type Argument Description opts object &lt;optional&gt; Step options. Properties Name Type Argument Default Description width number &lt;optional&gt; 1280 Virtual display width. height number &lt;optional&gt; 720 Virtual display height. depth number &lt;optional&gt; 24 Virtual display color depth. timeout number &lt;optional&gt; 1000 Time to wait for virtual display will be started, ms. Source: steps/xvfb.js, line 28 stopXvfb() Step to stop virtual display. This: Steps Source: steps/xvfb.js, line 47 × Search results Close "},"module-testing.html":{"id":"module-testing.html","title":"Module: testing","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: testing Data structures related with test cases. Source: testing.js, line 2 Classes TestStep Methods &lt;inner&gt; TestCase(name) Test case data structure. Contains full information and history about test case. Parameters: Name Type Description name string Test case name. Source: testing.js, line 17 × Search results Close "},"module-testing-TestStep.html":{"id":"module-testing-TestStep.html","title":"Class: TestStep","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: TestStep testing~ TestStep new TestStep(name, isFailed) Test step data structure. Parameters: Name Type Description name string Step name. isFailed boolean Flag whether step is failed or no. Source: testing.js, line 127 × Search results Close "},"module-testrail-reporter.html":{"id":"module-testrail-reporter.html","title":"Module: testrail-reporter","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: testrail-reporter Contains functions to report test results to testrail. Source: reporter/testrail.js, line 3 × Search results Close "},"module-utils.html":{"id":"module-utils.html","title":"Module: utils","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: utils Contains utils and helpers. Source: utils.js, line 3 Methods &lt;static&gt; capitalize(string) Capitalizes first letter of string. Doesn&quot;t influence to case of other letters. Parameters: Name Type Description string string string to capitalize Source: utils.js, line 35 Returns: capitalized string Type string &lt;static&gt; defVal(value) Gets default value for variable among passed listed values. Parameters: Name Type Argument Description value * &lt;repeatable&gt; variable value Source: utils.js, line 21 Returns: last specified value or null if last is undefined. Type * &lt;static&gt; isLeaf(root) Defines is node a leaf in tree according by its id. Parameters: Name Type Description root object tree root Source: utils.js, line 44 Returns: function to define node leaf status with closed root Type function &lt;static&gt; mkpath(paths) Composes file path from segments. If folder of file is absent, it will be created. Parameters: Name Type Argument Description paths string &lt;repeatable&gt; A sequence of paths or path segments. Source: utils.js, line 110 Returns: Composed path. Type string &lt;static&gt; sleep(timeout [, blocking]) Makes delay (sleep) during code execution. Parameters: Name Type Argument Default Description timeout number Time to sleep, ms. blocking boolean &lt;optional&gt; false Flag whether sleep should be block code execution. Source: utils.js, line 89 Returns: If sleep isn't blocking. Type Promise &lt;inner&gt; clearEmptyFolders(folder) Clears empty folders recursive. Parameters: Name Type Description folder string path to root folder Source: utils.js, line 68 × Search results Close "},"module-video.html":{"id":"module-video.html","title":"Module: video","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Module: video Classes and functions for video recording. Source: video.js, line 2 Classes VideoRecorder × Search results Close "},"module-video-VideoRecorder.html":{"id":"module-video-VideoRecorder.html","title":"Class: VideoRecorder","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Class: VideoRecorder video~ VideoRecorder contains methods to record video for tests new VideoRecorder() Creates a new instance of VideoRecorder. Properties: Name Type Argument Default Description isRunning boolean false flag is video recorder running or no filePath string &lt;nullable&gt; null path video file Source: video.js, line 20 Methods configure( [opts]) Configures video recorder. Parameters: Name Type Argument Description opts object &lt;optional&gt; recorder configuration Properties Name Type Argument Default Description fps number &lt;optional&gt; 30 video framerate width number &lt;optional&gt; 1024 video width height number &lt;optional&gt; 768 video height x number &lt;optional&gt; 0 X-offset on display y number &lt;optional&gt; 0 Y-offset on display Source: video.js, line 39 start() Starts video recorder. Source: video.js, line 67 Throws: if video recorder is started already Type Error if video recorder isn't configured yet Type Error stop() Stops video recorder. Source: video.js, line 83 Throws: if video recorder isn't started yet Type Error × Search results Close "},"SS.html":{"id":"SS.html","title":"Namespace: SS","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache Namespace: SS SS Atomic steps collection. Source: globals.js, line 32 × Search results Close "},"tutorial-console-args.html":{"id":"tutorial-console-args.html","title":"Tutorial: GlaceJS command line arguments","body":" GlaseJS Namespaces CONFSS Modules cliconfigerrorglobalsimageindexloggerpage/elementpage/eventpage/indexproxy/baseproxy/globalProxyproxy/indexproxy/middleware/indexproxy/middleware/infoproxy/middleware/speedproxy/proxyreporter/basereporter/indexreporter/stdoutrunnersteps/indexsteps/pagesteps/videosteps/websteps/xvfbtestingtestrail-reporterutilsvideo Classes error~ConfigErrorerror~GlaceErrorerror~StepErrorimage~Imagepage/element~Controlpage/event~PointerEventsproxy/base~BaseProxyproxy/globalProxy~GlobalProxyproxy/proxy~WebProxyreporter/base~BaseReportersteps/index~Stepstesting~TestStepvideo~VideoRecorder Tutorials GlaceJS command line arguments Global afterSessionafterStepbaseTestbeforeSessionbeforeStepcacheManagerexpectforEachLanguagefromCachescopesessionsteptesttoCache GlaceJS command line arguments GlaceJS supports follow command line arguments: &lt;path&gt; (optional) - File or folder path, where tests are located. For example, glace myTests.js or glace path/to/tests-folder. In folder it loads files with tests recursively. If file with tests is not specified directly, it loads files with prefix test and extension .js only. If argument is not specified, it looks inside folder tests in current work directory. --web (optional) - Activates steps for web testing in browser via selenium. If option is specified, selenium server and browser will launched automatically on session begin and will be stopped at session end. --install-drivers (optional) - Installs selenium webdrivers on session start. --platform (optional) - Platfrom type. Supported values are pc, android, ios. Default value is pc. For example, --platform android. --browser (optional) - Browser name. Default value is specific for platform: chrome for pc, chrome for android, safari for ios. For example, --browser firefox. --selenium-addr (optional) - Selenium or appium network address. For example, --selenium-addr 192.168.0.9:4004. If it is not specified, local selenium server with default options will be started. --device (optional) - Mobile device name. For example, --device &quot;My iPhone&quot; or --device Our_Android. Look for actual value for mobile device in its settings. --os-version (optional) - Mobile OS version. For example, --os-version 9.0.3 or --os-version 5.0.5. --udid (optional) - Mobile device UDID. --ios-engine (optional) - iOS driver engine name. Default value is XCUITest. --retry &lt;times&gt; (optional) - Number of times to retry a failed test case. --stdout-log (optional) - Print log to console stdout. × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
